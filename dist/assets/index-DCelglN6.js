import{r as x,j as e,R as nt}from"./react-CmJWdBQF.js";import{c as ot}from"./react-dom-CgiuWiBK.js";import{L as v,N as Q,B as it}from"./react-router-dom-CDWNZk7a.js";import{u as ae}from"./react-hook-form-JLKcvVdG.js";import{u as I,a as w,P as ct}from"./react-redux-cGFAzWS2.js";import{c as O,a as K,b as dt}from"./@reduxjs-B2HVw96-.js";import{i as mt,g as xt,a as ut,b as ze,s as ee,d as A,c as je,q as be,e as R,w as Ie,f as G,h as ht,j as pt,k as ft,l as gt,m as jt,n as Te,o as Be,u as bt,p as Qe,t as re,v as Ge,x as yt,T as Nt,y as ye,z as vt}from"./@firebase-kGHoAHmH.js";import"./firebase-CnAitw-r.js";import{B as F,Q as wt}from"./react-toastify-mKMFIvPk.js";import{c as T,b as Ue,e as Ct,O as He,f as ne,g as Le,h as k}from"./react-router-3IHJ8LQd.js";import{F as Pt,a as St,H as _e,C as Ne,P as kt,b as Oe,I as Et,c as Ye,d as It,e as Ut,f as Ot,G as We,g as Dt,h as Je,i as qt,j as ve,k as At}from"./react-icons-CJT0Lfl7.js";import{l as Ft,E as Lt,u as Mt,a as Rt,C as Me}from"./@stripe-DAiNulDS.js";import"./prop-types-BiVUseAU.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-Lznw-q9N.js";import"./use-sync-external-store-BK01zVmT.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./clsx-B-dksMZM.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=r(l);fetch(l.href,n)}})();const $t={apiKey:"AIzaSyAvMLR_9iKmlGEE4ew5opXP2zOErNJsJjQ",authDomain:"bella-store-ece11.firebaseapp.com",projectId:"bella-store-ece11",storageBucket:"bella-store-ece11.appspot.com",messagingSenderId:"619734707649",appId:"1:619734707649:web:b28f98c7c464e6e5a81340",measurementId:"G-CXP0W87RW3"},De=mt($t),H=xt(De),S=ut(De),zt=ze(De),Z=s=>{try{const t=s.items.map(r=>({id:r.id,quantity:r.quantity}));localStorage.setItem("cart",JSON.stringify(t))}catch(t){console.warn("Failed to save cart to localStorage",t)}},Se=()=>{try{const s=localStorage.getItem("cart"),r=(s?JSON.parse(s):[]).map(a=>({id:a.id,quantity:a.quantity}));return{items:r,totalQuantity:te(r),totalPrice:0}}catch(s){console.warn("Failed to load cart from localStorage",s);return}},Tt=Se()||{items:[],totalQuantity:0,totalPrice:0},te=s=>s.reduce((t,r)=>t+r.quantity,0),oe=s=>s.reduce((t,r)=>t+r.price*r.quantity,0);O("cart/updateFirebaseCart",async(s,{getState:t,rejectWithValue:r})=>{try{const a=t(),l=a.auth.userDetails;if(!l)return;const n=l.userId,d=a.cart.items.map(i=>({id:i.id,quantity:i.quantity}));await ee(A(S,"users",n),{cartProducts:d},{merge:!0})}catch(a){return console.error("Failed to update cart in Firebase",a),r(a.message)}});const ge=O("cart/initializeCart",async(s,{getState:t,rejectWithValue:r})=>{try{const l=t().auth.userDetails;if(l){const n=l.userId,o=A(S,"users",n),d=await je(o);let i=[];d.exists()&&(i=d.data().cartProducts||[]);const p=Se()||{items:[],totalQuantity:0,totalPrice:0},g={};for(const N of p.items)g[N.id]=N;const m=[];for(const N of i){const{id:j,quantity:P}=N;g[j]?g[j].quantity=Math.max(g[j].quantity,P):m.push(j)}let h=[];if(m.length>0){const N=[];for(let P=0;P<m.length;P+=10)N.push(m.slice(P,P+10));for(const P of N){const L=be(R(S,"products"),Ie("__name__","in",P));(await G(L)).forEach(q=>{var C;const M=q.data();h.push({id:q.id,title:M.title,imageUrl:M.imageUrl,price:M.price,quantity:((C=i.find(Y=>Y.id===q.id))==null?void 0:C.quantity)||0,stockquantity:M.stockquantity})})}}for(const N of h)g[N.id]=N;const c=Object.values(g),b=te(c),y=oe(c),u=c.map(N=>({id:N.id,quantity:N.quantity}));await ee(A(S,"users",n),{cartProducts:u},{merge:!0});const E={items:c,totalQuantity:b,totalPrice:y};return Z(E),E}else return Se()||{items:[],totalQuantity:0,totalPrice:0}}catch(a){return r(a.message)}}),Ze=K({name:"cart",initialState:Tt,reducers:{addToCart:(s,t)=>{const{id:r,title:a,imageUrl:l,price:n,stockquantity:o}=t.payload;s.items.find(i=>i.id===r)||s.items.push({id:r,title:a,imageUrl:l,price:n,quantity:1,stockquantity:o}),s.totalQuantity=te(s.items),s.totalPrice=oe(s.items),Z(s)},adjustQuantity:(s,t)=>{const{id:r,quantity:a,stockquantity:l}=t.payload,n=s.items.find(o=>o.id===r);n&&a>0&&a<=l&&(n.quantity=a,s.totalQuantity=te(s.items),s.totalPrice=oe(s.items),Z(s))},removeFromCart:(s,t)=>{const{id:r}=t.payload,a=s.items.findIndex(l=>l.id===r);a!==-1&&(s.items.splice(a,1),s.totalQuantity=te(s.items),s.totalPrice=oe(s.items),Z(s))},clearCart:s=>{s.items=[],s.totalQuantity=0,s.totalPrice=0,Z(s)}},extraReducers:s=>{s.addCase(ge.fulfilled,(t,r)=>{const{items:a,totalQuantity:l,totalPrice:n}=r.payload;t.items=a,t.totalQuantity=l,t.totalPrice=n}).addCase(ge.rejected,(t,r)=>{t.error=r.payload}).addCase("auth/logoutUser/fulfilled",t=>{t.items=[],t.totalQuantity=0,t.totalPrice=0,Z(t)})}}),Bt=s=>t=>r=>{const a=t(r);if(["cart/addToCart","cart/adjustQuantity","cart/removeFromCart","cart/clearCart"].includes(r.type)){const n=s.getState(),o=n.auth.userDetails;if(o){const i=n.cart.items.map(p=>({id:p.id,quantity:p.quantity}));ee(A(S,"users",o.userId),{cartProducts:i},{merge:!0}).catch(p=>{console.error("Failed to update cart in Firebase",p)})}}return a},{addToCart:we,removeFromCart:Re,clearCart:Ve,adjustQuantity:Qt}=Ze.actions,Gt=Ze.reducer,ie=O("auth/registerUser",async({userEmail:s,password:t,userName:r,role:a},{rejectWithValue:l})=>{try{const o=(await ht(H,s,t)).user,d=o.uid,i={userName:r,userEmail:s,userId:d,cartProducts:[],favoriteProducts:[],role:a||"user",createdAt:new Date().toISOString()};return await ee(A(S,"users",d),i),{user:o,userDetails:i}}catch(n){return l(n.message)}}),ce=O("auth/loginUser",async({userEmail:s,password:t},{dispatch:r,rejectWithValue:a})=>{try{await pt(H,ft);const n=(await gt(H,s,t)).user;await new Promise(i=>setTimeout(i,2e3));const o=A(S,"users",n.uid),d=await je(o);if(d.exists()){const i=d.data();return r(ge()),{user:n,userDetails:i}}else return a("User document does not exist")}catch(l){return a(l.message)}}),qe=O("auth/logoutUser",async(s,{dispatch:t})=>{await jt(H),t(Ve())}),ke=O("auth/fetchUsers",async(s,{rejectWithValue:t})=>{try{const r=R(S,"users");return(await G(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){return t(r.message)}}),W=O("auth/fetchUserData",async(s,{rejectWithValue:t})=>{try{const r=A(S,"users",s),a=await je(r);return a.exists()?{userDetails:a.data()}:t("User document does not exist")}catch(r){return t(r.message)}}),se=O("auth/updateUser",async(s,{rejectWithValue:t,getState:r})=>{try{const{userDetails:a}=r().auth;if(!a)throw new Error("User not authenticated");return await ee(A(S,"users",a.userId),s,{merge:!0}),s}catch(a){return t(a.message)}}),Ee=O("auth/deleteUser",async(s,{rejectWithValue:t})=>{try{const r=A(S,"users",s);return await Te(r),s}catch(r){return t(r.message)}}),$e=O("auth/updateUserProfileImage",async({userId:s,imageFile:t},{rejectWithValue:r})=>{try{const a=ze(),l=Be(a,`profileImages/${s}`);await bt(l,t);const n=await Qe(l),o=A(S,"users",s);return await ee(o,{profileImageUrl:n},{merge:!0}),{userId:s,imageUrl:n}}catch(a){return r(a.message)}}),Ht=K({name:"auth",initialState:{user:null,userDetails:null,loading:!1,error:null,role:null,users:[]},reducers:{},extraReducers:s=>{s.addCase(ie.pending,t=>{t.loading=!0}).addCase(ie.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.userDetails=r.payload.userDetails,t.role=r.payload.userDetails.role}).addCase(ie.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(ce.pending,t=>{t.loading=!0}).addCase(ce.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.userDetails=r.payload.userDetails,t.role=r.payload.userDetails.role}).addCase(ce.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(qe.fulfilled,t=>{t.user=null,t.userDetails=null,t.role=null}).addCase(W.pending,t=>{t.loading=!0}).addCase(W.fulfilled,(t,r)=>{t.loading=!1,t.userDetails=r.payload.userDetails,t.role=r.payload.userDetails.role}).addCase(W.rejected,t=>{t.loading=!1}).addCase(ke.fulfilled,(t,r)=>{t.users=r.payload}).addCase(ke.rejected,(t,r)=>{t.error=r.payload}).addCase(se.pending,t=>{t.loading=!0,t.error=null}).addCase(se.fulfilled,(t,r)=>{t.loading=!1,t.userDetails={...t.userDetails,...r.payload}}).addCase(se.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Ee.fulfilled,(t,r)=>{t.users=t.users.filter(a=>a.id!==r.payload)}).addCase(Ee.rejected,(t,r)=>{t.error=r.payload}).addCase($e.fulfilled,(t,r)=>{const a=t.users.findIndex(l=>l.id===r.payload.userId);a!==-1&&(t.users[a]={...t.users[a],profileImageUrl:r.payload.imageUrl}),t.userDetails.profileImageUrl=r.payload.imageUrl}).addCase($e.rejected,(t,r)=>{t.error=r.payload})}}),_t=Ht.reducer,Yt=()=>{const s=I(),t=T(),[r,a]=x.useState(!1),{register:l,handleSubmit:n,formState:{errors:o}}=ae(),d=async i=>{a(!0);try{(await s(ce({userEmail:i.userEmail,password:i.password})).unwrap()).role==="admin"?(F.success("Welcome back, Admin!",{position:"bottom-right"}),t("/dashboard")):(await s(ge()),F.success("Login successful!",{position:"bottom-right"}),t("/"))}catch(p){const g=p.code==="auth/user-not-found"?"User not found. Please check your email.":p.code==="auth/wrong-password"?"Incorrect password. Please try again.":"An unexpected error occurred. Please try again later.";F.error(g,{position:"bottom-right"})}finally{a(!1)}};return e.jsx("div",{className:"h-screen overflow-hidden bg-gray-50",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 animate-fadeIn",children:e.jsxs("div",{className:"w-full max-w-md px-8 py-10 bg-white rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-center items-center gap-3 mb-6",children:e.jsx("h1",{className:"text-3xl font-semibold text-gray-700",children:"Sign in"})}),e.jsxs("form",{onSubmit:n(d),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userEmail",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{id:"userEmail",name:"userEmail",type:"email",...l("userEmail",{required:"Email Address is required",pattern:{value:/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,}$/i,message:"Invalid email address"}}),className:`mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-mainColor focus:ring-1 focus:ring-mainColor transition-colors ${o.userEmail?"border-red-500":""}`,"aria-label":"Email Address","aria-required":"true"}),o.userEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.userEmail.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",...l("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters long"}}),className:`mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-mainColor focus:ring-1 focus:ring-mainColor transition-colors ${o.password?"border-red-500":""}`,"aria-label":"Password","aria-required":"true"}),o.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.password.message})]}),e.jsx("div",{children:e.jsxs("button",{type:"submit",className:"w-full py-2 px-4 bg-[#B48E61] text-white font-semibold rounded-md shadow-md hover:bg-mainColor-light transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-mainColor",disabled:r,children:[r?"Loading...":"Sign in"," "]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Don’t have an account?",e.jsx(v,{to:"/register",className:"ml-1 text-mainColor hover:text-mainColor font-montserrat transition-colors",children:"Sign up"})]})})]})})})},z=()=>{const s=w(c=>c.cart.totalQuantity),[t,r]=x.useState(!1),[a,l]=x.useState(!1),n=Ue(),o=I(),d=T(),{user:i,userDetails:p}=w(c=>c.auth),g=()=>{window.scrollY>0?r(!0):r(!1)},m=()=>{l(!a)},h=async()=>{try{await o(qe()).unwrap(),F.success("Logged out successfully!",{position:"bottom-right"}),d("/login")}catch{F.error("An error occurred while logging out. Please try again.",{position:"bottom-right"})}};return x.useEffect(()=>(i&&o(W()),window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)}),[o,i]),e.jsxs("nav",{className:`fixed w-full top-0 z-50 transition-colors duration-500 px-[7%] ${t||n.pathname!=="/"&&n.pathname!=="/AboutUs"?"bg-white text-titleColor h-20":"bg-transparent text-white"}`,children:[e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:`text-3xl font-bold mt-4 ${t||n.pathname!=="/"?"text-mainColor":""}`,children:[e.jsx("span",{children:e.jsx(v,{to:"/",className:"flex justify-center font-sans",children:"Bella"})}),e.jsx("p",{className:`text-sm font-light ${t?"text-mainColor":""}`,children:e.jsx(v,{to:"/",className:"text-[0.7rem] font-extralight",children:"LUXURY YOU DESERVE"})})]}),e.jsx("div",{className:"lg:hidden",children:e.jsx("button",{onClick:m,className:`text-3xl ${t?"text-titleColor":"text-btncolor"}`,children:a?e.jsx(Pt,{}):e.jsx(St,{})})}),e.jsxs("ul",{className:"hidden lg:flex space-x-8 uppercase tracking-wide mt-3",children:[e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200 text-[1rem]",children:e.jsx(v,{to:"/",children:"Home"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200 text-[1rem]",children:e.jsx(v,{to:"/aboutus",children:"About Us"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200 text-[1rem]",children:e.jsx(v,{to:"/Products",children:"Collection"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200 text-[1rem]",children:e.jsx(v,{to:"/contactUs",children:"Contact Us"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/shop",onClick:m,children:"Store"})})]}),e.jsxs("div",{className:"hidden lg:flex space-x-4 items-center mt-4",children:[e.jsx("div",{className:"hover:text-mainColor cursor-pointer transition-all duration-200 relative",children:e.jsxs(v,{to:"/cart",children:[s>0&&e.jsx("span",{className:"absolute top-[0px] right-[-5px] flex justify-center items-center text-white bg-opacity-100 bg-[#DD5746] rounded-full text-xs px-[3px] ",children:s}),e.jsx(_e,{className:"size-6"})]})}),e.jsxs("div",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:[e.jsx(v,{to:"/wishlist",children:e.jsx(Ne,{className:"size-6"})})," "]}),e.jsx(kt,{className:"size-6"}),p?e.jsx("div",{className:"flex-none text-center",children:e.jsxs("div",{className:"dropdown dropdown-end",children:[e.jsx("div",{tabIndex:0,role:"button",className:"",children:e.jsx("div",{className:"w-40 text-[1rem]",children:p==null?void 0:p.userName})}),e.jsxs("ul",{tabIndex:0,className:"menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow",children:[e.jsx("li",{children:e.jsxs(Q,{className:" text-titleColor",to:"/profileUser/userInfo",children:[e.jsx(Oe,{size:18}),"User Profile"]})}),e.jsx("li",{children:e.jsxs(v,{onClick:h,className:" text-titleColor",children:[e.jsx(Et,{size:18}),"LogOut"]})})]})]})}):e.jsx("div",{className:"hover:text-mainColor cursor-pointer transition-all duration-200 text-[1rem]",children:e.jsx(v,{to:"/login",className:"mr-5",children:"LOGIN"})})]})]}),e.jsxs("div",{className:`fixed top-0 left-0 h-full w-64 bg-white text-black shadow-lg z-50 transform ${a?"translate-x-0":"-translate-x-full"} transition-transform duration-300 lg:hidden`,onClick:()=>l(!1),children:[e.jsx("div",{className:"absolute top-4 right-4 text-3xl cursor-pointer",onClick:()=>l(!1)}),e.jsxs("ul",{className:"flex flex-col space-y-8 p-8 text-black uppercase",children:[e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/",onClick:m,children:"Home"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/AboutUs",onClick:m,children:"About Us"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/Products",onClick:m,children:"Collection"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/contact",onClick:m,children:"Contact Us"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/shop",onClick:m,children:"Store"})}),p?e.jsx("li",{children:e.jsx(Q,{className:" text-titleColor hover:text-hovermain",to:"/profileUser/userInfo",onClick:m,children:p.userName})}):e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/login",onClick:m,children:"Login"})}),e.jsx("li",{className:"hover:text-mainColor cursor-pointer transition-all duration-200",children:e.jsx(v,{to:"/register",onClick:m,children:"Register"})})]})]})]})]})},Ae="/assets/404-bg-CvhCAzWz.jpg",Wt=()=>e.jsx("section",{className:"h-screen flex items-center justify-center bg-cover bg-center",style:{backgroundImage:`url(${Ae})`},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-5xl font-bold text-white",children:"JUST FOR YOUR HOME"}),e.jsx("p",{className:"text-lg mt-4 text-white",children:"BELLA - Bringing you premium comfort."})]})}),Xe="/assets/about1--SNjFZO0.jpg",Ke="/assets/about2-DkaM6Mds.jpg";function Jt(){return e.jsxs("div",{className:"grid grid-cols-6 my-4 md:grid-cols-3 gap-5 justify-center items-center p-3 md:p-5 md:py-[3%] md:px-[7%] px-[7%] bg-[#F7F7F7]",children:[e.jsx("div",{className:" col-span-6 md:col-span-1 text-center md:text-start  p-2",children:e.jsxs("div",{className:" font-Montserrat",children:[e.jsx("h2",{className:" text-[14px] md:text-[1.3rem] font-normal leading-[1.4]  text-mainColor mb-2 font-Montserrat letter-spacing",children:"ABOUT US"}),e.jsx("p",{className:"capitalize text-titleColor mb-3 text-[1.1rem] font-Montserrat",children:"Best furniture at the best price"}),e.jsx("p",{className:"text-textColor mb-4 text-[14px] md:text-[1.1rem] font-Montserrat ",children:"We are a home furniture manufacturer, mainly engaged in designing, manufacturing and selling home furniture products"}),e.jsx("button",{className:`text-[12px] md:text-[14] p-[0.6rem] px-5 md:p-[0.9rem] md:px-7 relative border border-textColor  \r
          after:content-[''] after:absolute after:top-[20] after:left-[-18px] after:w-[20%] after:h-[40%] after:bg-[#F7F7F7]  hover:after:opacity-0\r
          before:content-[''] before:absolute before:top-[20] before:right-[-18px] before:w-[20%] before:h-[40%] before:bg-[#F7F7F7]  hover:before:opacity-0\r
         transition ease-in duration-300 hover:text-mainColor hover:border-mainColor hover:p-[0.7rem] hover:px-5 md:hover:p-[0.9rem] md:hover:px-7`,children:"MORE ABOUT US"})]})}),e.jsx("div",{className:"col-span-2  md:col-span-1  relative left-[0rem]  md:relative md:left-[13rem] w-[120%] md:w-[80%] z-3",children:e.jsx("img",{src:Ke,alt:"aboutUs",className:""})}),e.jsx("div",{className:"col-span-4 md:col-span-1   relative z-5 pr-2",children:e.jsx("img",{src:Xe,alt:"aboutUs"})})]})}const Zt="/assets/Catogery-DwFmRB2O.jpg";function Vt(){const[s,t]=x.useState([]),r=async()=>{try{const l=await(await fetch("data.json")).json();t(l)}catch{}};return x.useEffect(()=>{r()},[]),e.jsx("div",{className:"flex flex-wrap justify-center items-center content-center gap-5 lg:px-[3.8%]",children:s.length>0&&s.map(a=>e.jsxs(v,{to:"/shop",className:`relative w-full md:w-[48%] lg:w-[30%] px-[7%] cursor-pointer bg-center bg-cover min-h-[25rem] max-h-[30rem] \r
            lg:min-h-[25rem] lg:max-h-[70rem] xl:min-h-[35rem] xl:max-h-[60rem] group overflow-hidden`,style:{backgroundImage:`url(${a.image})`},children:[e.jsx("div",{className:"absolute inset-0 transition-transform duration-300 group-hover:scale-110 bg-cover bg-center",style:{backgroundImage:`url(${a.image})`}}),e.jsxs("div",{className:"absolute inset-0 opacity-50 group-hover:opacity-40 transition-opacity duration-300",children:[e.jsx("div",{className:"absolute inset-0 hover:bg-gradient-to-t from-black to-transparent"}),e.jsx("h3",{className:"text-white text-center lg:text-left text-[1.5rem] font-light leading-4 font-montserrat absolute bottom-0 px-5 py-7 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.name})]})]},a.id))})}function Xt(){return e.jsx("div",{children:e.jsxs("div",{className:"bg-center bg-cover pb-[5%]",style:{backgroundImage:`url(${Zt})`},children:[e.jsxs("div",{className:"flex justify-between items-center px-[7%] py-[5%] text-white",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:"/triangle.svg",alt:"Icon",className:"w-8 h-8"}),e.jsx("h2",{className:"text-white text-[1.3rem] p-5  md:text-[2rem] font-montserrat",children:"Choose A Category"})]}),e.jsx("p",{className:"text-sm  w-[30%]  font-montserrat text-14 leading-7 opacity-0 lg:opacity-100 ",children:"Your place to get one-of-a-kind furniture pieces along with our home styling, and consultancy services."})]}),e.jsx(Vt,{})]})})}const Kt={items:[],status:"idle",error:null},V=O("favourites/toggleFavourite",async(s,{getState:t,dispatch:r})=>{const a=t(),{userDetails:l}=a.auth,n=a.favourites.items.indexOf(s);let o;return n!==-1?o=a.favourites.items.filter(d=>d!==s):o=[...a.favourites.items,s],await r(de({userId:l.userId,favoriteProducts:o})),o}),de=O("favourites/updateFavoriteProductsByUserId",async({userId:s,favoriteProducts:t},{rejectWithValue:r})=>{try{if(!Array.isArray(t))throw new Error("favoriteProducts must be an array");const a=be(R(S,"users"),Ie("userId","==",s)),l=await G(a);if(l.empty)throw new Error("User not found");const n=l.docs[0],o=A(S,"users",n.id);return await re(o,{favoriteProducts:t}),console.log("Favorites updated successfully"),t}catch(a){return console.error("Error updating favorites:",a.message),r(a.message)}}),es=K({name:"favourites",initialState:Kt,reducers:{},extraReducers:s=>{s.addCase(W.fulfilled,(t,r)=>{t.items=r.payload.userDetails.favoriteProducts||[]}).addCase(V.fulfilled,(t,r)=>{t.items=r.payload}).addCase(de.pending,t=>{t.status="loading"}).addCase(de.fulfilled,(t,r)=>{t.status="succeeded",t.items=r.payload}).addCase(de.rejected,(t,r)=>{t.status="failed",t.error=r.payload})}}),ts=es.reducer;function et({id:s,title:t,imageUrl:r,price:a,uid:l,stockquantity:n}){const o=I(),d=T(),p=w(y=>y.favourites.items).includes(s),m=w(y=>y.cart.items).some(y=>y.id===s),{userDetails:h}=w(y=>y.auth),c=()=>{n>0&&o(we({id:s,title:t,imageUrl:r,price:a,stockquantity:n}))},b=()=>{h?(o(V(s)),console.log("Toggled favorite for product ID:",s)):d("/login")};return e.jsxs("div",{className:"w-full md:w-[47%] lg:w-[47%] xl:w-[27%] hover:cursor-pointer group relative",children:[e.jsx(v,{to:`/products/${s}`,className:"row-span-3",children:e.jsx("img",{src:r,alt:t,className:"w-full min-h-[15rem] lg:min-h-[20rem] max-h-[20rem] object-cover"})}),e.jsxs("div",{className:"bg-titleColor text-white grid grid-cols-4 text-center w-full opacity-0 group-hover:opacity-100 transition-all duration-300",children:[e.jsx("div",{onClick:c,className:`col-span-3 p-3 flex justify-center items-center hover:bg-mainColor hover:text-white transition-all duration-200 ${n===0?"bg-gray-500 hover:bg-slate-600 cursor-not-allowed":""}`,children:n===0?e.jsx("span",{className:"text-[0.9rem]",children:"OUT OF STOCK"}):m?e.jsx("button",{className:"text-[0.9rem]",children:"Added TO CART"}):e.jsx("button",{className:"text-[0.9rem]",children:"ADD TO CART"})}),e.jsx("div",{className:"col-span-1 cursor-pointer border-gray-500 border transition-all duration-200 hover:text-white hover:border-mainColor hover:bg-mainColor flex justify-center items-center",onClick:b,children:p&&h?e.jsx(Ye,{size:19,color:"red"}):e.jsx(Ne,{size:24,color:"white"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-titleColor text-[1rem] md:text-[1.1rem] lg:text-[1.3rem] font-normal mt-1 hover:text-mainColor transition-all duration-200",children:t}),e.jsxs("p",{className:"text-mainColor mt-1 lg:text-[1.2rem]",children:[a," ",e.jsx("span",{className:"text-[0.8rem]",children:"EGP"})]})]})]})}const _=O("products/fetchProducts",async()=>(await G(R(S,"products"))).docs.map(r=>({id:r.id,...r.data()}))),me=O("products/addProducts",async({title:s,price:t,imageUrl:r,category:a,description:l,quantity:n,id:o})=>{const d=Number(t),i=Number(n);try{const p=await Ge(R(S,"products"),{title:s,category:a,description:l,imageUrl:r,price:d,quantity:i,createdAt:new Date});return p.updateDoc({id:p.id}),{Pid:p.id,title:s,price:t,imageUrl:r,id:o,category:a,description:l,quantity:n}}catch(p){throw new Error("Failed to add product: "+p.message)}}),xe=O("products/updateProducts",async({productId:s,updatedData:t})=>{const r=A(S,"products",s);try{return await re(r,t),{id:s,...t}}catch(a){throw new Error("Failed to update product: "+a.message)}}),ue=O("products/deleteProducts",async s=>{const t=A(S,"products",s);try{return await Te(t),s}catch(r){throw new Error("Failed to delete product: "+r.message)}}),tt=K({name:"products",initialState:{items:[],loading:!1,error:null,filteredItems:[],selectedCategories:[]},reducers:{setProducts(s,t){s.items=t.payload,s.filteredItems=t.payload},setSelectedCategories(s,t){s.selectedCategories=t.payload,s.filteredItems=s.items.filter(r=>t.payload.includes(r.category))}},extraReducers:s=>{s.addCase(_.pending,t=>{t.loading=!0,t.error=null}).addCase(_.fulfilled,(t,r)=>{t.items=r.payload,t.filteredItems=r.payload,t.loading=!1}).addCase(_.rejected,(t,r)=>{t.error=r.error.message,t.loading=!1}).addCase(me.pending,t=>{t.loading=!0}).addCase(me.fulfilled,(t,r)=>{t.items.push(r.payload),t.loading=!1}).addCase(me.rejected,(t,r)=>{t.error=r.error.message,t.loading=!1}).addCase(xe.pending,t=>{t.loading=!0}).addCase(xe.fulfilled,(t,r)=>{const a=t.items.findIndex(l=>l.id===r.payload.id);a!==-1&&(t.items[a]={...t.items[a],...r.payload}),t.loading=!1}).addCase(xe.rejected,(t,r)=>{t.error=r.error.message,t.loading=!1}).addCase(ue.pending,t=>{t.loading=!0}).addCase(ue.fulfilled,(t,r)=>{t.items=t.items.filter(a=>a.id!==r.payload),t.loading=!1}).addCase(ue.rejected,(t,r)=>{t.error=r.error.message,t.loading=!1})}});tt.actions;const ss=tt.reducer,st=()=>{const s=I(),{items:t,loading:r}=w(l=>l.products);x.useEffect(()=>{s(_())},[s]);const a=t.slice(0,4);return r?e.jsx("div",{className:"flex items-center justify-center object-centerw-full mt-[25%]",children:e.jsx("div",{className:"",children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})}):e.jsx("div",{className:"flex flex-col md:flex-col lg:flex-row gap-6 ",children:a.map(l=>e.jsx(et,{id:l.id,title:l.title,price:l.price,imageUrl:l.imageUrl,stockquantity:l.quantity,link:""},l.id))})};function rs(){return e.jsx(v,{to:"/products",children:e.jsx("button",{className:`text-[14px] md:text-[16] p-[1rem] px-5 md:p-[1.5rem] md:px-10 relative border border-textColor  \r
          after:content-[''] after:absolute after:top-[20] after:left-[-18px] after:w-[20%] after:h-[40%] after:bg-[#fff]  hover:after:opacity-0\r
          before:content-[''] before:absolute before:top-[20] before:right-[-18px] before:w-[20%] before:h-[40%] before:bg-[#fff]  hover:before:opacity-0\r
         transition-all ease-in duration-400 hover:text-mainColor hover:border-mainColor hover:p-[1rem] hover:px-5 md:hover:p-[1.5rem] md:hover:px-10`,children:"MORE PRODUCTS"})})}const as=[{imgSrc:"/public/lamba.svg",imgAlt:"Icon",title:"SHOP",subtitle:"Furniture Selections",description:"Enjoy a stress-free and enjoyable home styling experience, knowing that our team is dedicated to delivering exceptional results."},{imgSrc:"/public/home.svg",imgAlt:"Icon",title:"Design & Development",subtitle:"Furniture Selections",description:"Enjoy a stress-free and enjoyable home styling experience, knowing that our team is dedicated to delivering exceptional results.."},{imgSrc:"/public/Lampshade.svg",imgAlt:"Icon",title:"Customization",subtitle:"Planning & Conceptualizing",description:"We do customize furniture where our team of experts works closely with customers to create custom furniture pieces that are both functional."}];function ls(){return e.jsx("div",{className:"flex justify-center items-center flex-col  lg:flex-row gap-10 p-3 md:p-5 md:py-[3%] md:px-[7%]",children:as.map((s,t)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:s.imgSrc,alt:s.imgAlt,className:"h-12"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-titleColor text-[1.2rem] font-semibold w-[120%]",children:s.title}),e.jsx("p",{className:"text-textColor text-[1.1rem] mb-2",children:s.subtitle}),e.jsx("div",{className:"w-[100%] border"})]})]}),e.jsx("div",{className:"w-full min-h-[100px] max-h-[200px] mt-3",children:e.jsx("p",{className:"text-textColor text-[1.1rem]",children:s.description})})]},t))})}function $(){return e.jsxs("div",{className:"bg-titleColor text-white",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center p-[3%]",children:[e.jsx("div",{className:"mt-3",children:e.jsxs("h2",{className:"flex justify-center items-center flex-col text-mainColor text-[10px]",children:[e.jsx(v,{to:"/",className:"font-sans text-3xl font-bold",children:"Bella"}),e.jsx("span",{className:"text-[9px] font-light",children:"LUXURY YOU DESERVE"})]})}),e.jsx("p",{className:"text-[1.3rem] w-[55%] md-[55%] lg:w-70%  p-[1%] text-center font-thin",children:"Find Your Dream Furniture"})]}),e.jsx("div",{className:"w-full h-[1px] bg-[#4D4D4D]"}),e.jsxs("div",{className:"w-full  flex flex-col md:flex-row justify-between items-center px-[7%] py-[1.5%]",children:[e.jsxs("div",{className:"flex gap-3 my-5 lg:m-0",children:[e.jsx(v,{to:"https://web.facebook.com",className:"border rounded-full border-textColor p-2 text-textColor hover:bg-white  hover:text-titleColor ",children:e.jsx(It,{size:12})}),e.jsx(v,{to:"https://www.instagram.com",className:"border rounded-full p-2 border-textColor text-textColor hover:bg-white  hover:text-titleColor ",children:e.jsx(Ut,{size:12})})]}),e.jsxs("div",{className:"flex gap-10 lg:gap-6",children:[e.jsx(v,{to:"/AboutUs",className:"text-textColor hover:text-white text-[1.1rem]",children:"About Us"}),e.jsx(v,{to:"/Products",className:"text-textColor hover:text-white text-[1.1rem]",children:"Our Products"}),e.jsx(v,{to:"/contactUs",className:"text-textColor hover:text-white text-[1.1rem]",children:"Contact Us"})]})]}),e.jsx("div",{className:"flex justify-center mt-5 p-2",children:e.jsx("p",{className:"text-[0.7rem] md:text-[0.8rem] text-textColor",children:"COPYRIGHT 2024 © BELLA. ALL RIGHTS RESERVED"})})]})}const ns=()=>e.jsxs("div",{style:{height:"2000px"},children:[e.jsx(z,{}),e.jsx(Wt,{}),e.jsx(Jt,{}),e.jsx(Xt,{}),e.jsx(ls,{}),e.jsxs("div",{className:"px-[7%] py-5 md:py-[3%] md:px-[7%]",children:[e.jsx("p",{className:" text-[18px] font-normal leading-[1.5] text-mainColor  font-Montserrat letter-spacing-2",children:" O U R   P R O D U C T S"}),e.jsx("h2",{className:"text-titleColor text-[2rem] md:text-[2.3rem] mb-5 font-semibold",children:"COLLECTIONS"}),e.jsx(st,{}),e.jsx("div",{className:"flex justify-center items-center p-10",children:e.jsx(rs,{})})]}),e.jsx($,{})]}),os=()=>{const s=I(),{loading:t}=w(i=>i.auth),r=T(),{register:a,handleSubmit:l,formState:{errors:n},watch:o}=ae(),d=i=>{s(ie({userEmail:i.userEmail,password:i.password,userName:i.userName,cartProducts:i.cartProducts||[],favoriteProducts:i.favoriteProducts||[]})).unwrap().then(()=>{F.success("Registration successful!",{position:"bottom-right"}),r("/")}).catch(p=>{const g=p.code==="auth/invalid-credential"?"The credentials provided are invalid,Please check your input and try again.":"An unexpected error occurred , Please try again later.";F.error(g,{position:"bottom-right"})})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 overflow-hidden",children:e.jsxs("div",{className:"w-full max-w-md px-8 py-10 bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"flex justify-center items-center gap-3 mb-6",children:e.jsx("h1",{className:"text-3xl font-semibold text-gray-700",children:"Sign up"})}),e.jsxs("form",{onSubmit:l(d),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-gray-700",children:"User Name"}),e.jsx("input",{id:"userName",name:"userName",type:"text",...a("userName",{required:"User Name is required",pattern:{value:/^[a-zA-Z]+$/i,message:"User Name can only contain letters"},minLength:{value:3,message:"User Name must be at least 3 characters long"}}),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-mainColor focus:ring-1 focus:ring-mainColor transition-colors"}),n.userName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.userName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userEmail",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{id:"userEmail",name:"userEmail",type:"email",...a("userEmail",{required:"Email Address is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Enter a valid email address"}}),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-mainColor focus:ring-1 focus:ring-mainColor transition-colors"}),n.userEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.userEmail.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",...a("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters long"}}),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-mainColor focus:ring-1 focus:ring-mainColor transition-colors"}),n.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",...a("confirmPassword",{validate:i=>i===o("password")||"Passwords do not match"}),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-mainColor focus:ring-1 focus:ring-mainColor transition-colors"}),n.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.confirmPassword.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:t,className:"w-full py-2 px-4 bg-[#B48E61] text-white font-semibold rounded-md shadow-md hover:bg-mainColor-light transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-mainColor",children:t?"Registering...":"Sign up"})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Already have an account?",e.jsx(v,{to:"/login",className:"ml-1 text-mainColor hover:text-mainColor font-montserrat transition-colors",children:"Sign in"})]})})]})})},is="/assets/cas-1-D3Mn6hgx.jpg",cs="/assets/Hero-BfW2SW2-.jpg",ds=()=>{const s=x.useRef(null);return x.useEffect(()=>{const t=()=>{const a=(window.pageYOffset||document.documentElement.scrollTop)*-.02;s.current&&(s.current.style.transform=`translateY(${a}px)`)};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]),e.jsxs("div",{children:[e.jsx(z,{transparent:!0}),e.jsx("div",{style:{backgroundImage:`url(${is})`},className:"bg-cover bg-center h-[40vh] md:h-[75vh] relative flex items-center text-pretty",children:e.jsx("div",{className:"animate-fadeIn",children:e.jsx("div",{className:"text-white md:px-12 lg:px-20 text-2xl md:text-[4xl] font-extralight",children:"About Us"})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between px-[7%] my-[5%] bg-white",children:[e.jsxs("div",{className:"mb-8 lg:mb-0",children:[e.jsx("h2",{className:"text-[2rem] font-500 font-montserrat text-gray-800 mb-4",children:"WELCOME TO BELLA"}),e.jsx("p",{className:"text-md  max-w-[60%] text-[#9b9b9b] font-montserrat mb-8 space-y-10 ",children:"Your place to get one-of-a-kind furniture pieces along with our home styling, and consultancy services. We take great pride in providing a diverse selection of furniture options."}),e.jsxs("div",{className:"flex space-x-16 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-4xl font-semibold text-mainColor",children:"165"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Products Completed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-4xl font-semibold text-mainColor ",children:"300"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Our Clients"})]})]})]}),e.jsx("div",{className:" flex items-center justify-center bg-black",children:e.jsx("img",{src:cs,alt:"Luxury Sofa",className:"max-w-full h-auto"})})]}),e.jsxs("div",{className:" grid grid-cols-6 md:grid-cols-4  items-center justify-center md:px-[7%] mb-[5%]",children:[e.jsxs("div",{className:"col-span-6 md:col-span-2 relative  mr-[15%]",children:[e.jsx("img",{src:Xe,alt:"aboutUs",className:"w-full md:w-[85%]"}),e.jsx("img",{ref:s,src:Ke,alt:"aboutUs",className:"absolute w-[100%] md:w-[60%] left-0 md:left-[60%] top-[8rem] md:top-[55%]"})]}),e.jsx("div",{className:"col-span-6 md:col-span-2 text-left md:text-left  pl-[25%]",children:e.jsxs("div",{className:"p-1",children:[e.jsx("h2",{className:" text-[14px] md:text-[1.3rem] font-normal leading-[1.4] text-mainColor mb-2 font-Montserrat letter-spacing",children:"ABOUT US"}),e.jsx("p",{className:"capitalize text-titleColor mb-3 text-[1.1rem] font-Montserrat ",children:"Best furniture at the best price"}),e.jsx("p",{className:"text-textColor mb-2 text-[14px] md:text-[1.1rem] font-Montserrat ",children:"We are a home furniture manufacturer, mainly engaged in designing, manufacturing, and selling home furniture products."})]})})]})," ",e.jsx($,{})]})};function ms({id:s,title:t,price:r,imageUrl:a}){return e.jsxs("div",{className:"w-full md:w-[47%] lg:w-[47%] xl:w-[27%] hover:cursor-pointer group relative",children:[e.jsx(v,{to:`/Products/${s}`,className:"row-span-3",children:e.jsx("img",{src:a,alt:t,className:"w-full min-h-[15rem] lg:min-h-[20rem] max-h-[20rem] object-cover"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-titleColor text-[1rem] md:text-[1.1rem] lg:text-[1.3rem] font-normal mt-1 hover:text-mainColor transition-all duration-200",children:t}),e.jsxs("p",{className:"text-mainColor mt-1 lg:text-[1.2rem]",children:[r," ",e.jsx("span",{className:"text-[0.8rem]",children:"EGP"})]})]})]})}function X({title:s,bg_image:t="../../../public/cart-page-header.jpg"}){return e.jsxs("div",{className:"relative bg-gray-100 h-72 flex items-center justify-center",children:[e.jsx("img",{src:t,alt:"Cart Banner",className:"absolute inset-0 w-full h-full object-cover object-bottom"}),e.jsx("h1",{className:" relative text-5xl md:text-5xl text-gray-700 p-5 font-bold",children:s})]})}const le=(s,t,r)=>{const a=[],l=Math.max(2,s-1),n=Math.min(t-1,s+1);a.push(e.jsx("button",{className:`px-2  ${s===1?"bg-btncolor rounded-full text-white text-xs":""}`,onClick:()=>r(1),children:"1"},1)),s>3&&a.push(e.jsx("span",{className:"px-2",children:"..."},"start-ellipsis"));for(let o=l;o<=n;o++)a.push(e.jsx("button",{className:`px-2  ${s===o?"bg-btncolor rounded-full text-white text-xs":""}`,onClick:()=>r(o),children:o},o));return s<t-2&&a.push(e.jsx("span",{className:"px-2",children:"..."},"end-ellipsis")),t>1&&a.push(e.jsx("button",{className:`px-2  ${s===t?"bg-btncolor rounded-full text-white text-xs":""}`,onClick:()=>r(t),children:t},t)),a.length>1?e.jsxs("div",{className:"flex space-x-2 justify-center mt-4",children:[e.jsx("button",{onClick:()=>r(s-1),disabled:s===1,className:`px-3 py-1 ${s===1?" text-gray-500 cursor-not-allowed":""}`,children:"<"}),a,e.jsx("button",{onClick:()=>r(s+1),disabled:s===t,className:`px-3 py-1 ${s===t?" text-gray-500 cursor-not-allowed":""}`,children:">"})]}):null},xs=()=>{const t=I(),{items:r,loading:a}=w(c=>c.products),[l,n]=x.useState(1),[o,d]=x.useState([]);x.useEffect(()=>{t(_())},[t]),x.useEffect(()=>{d(r)},[r]);const i=l*9,p=i-9,g=o.slice(p,i),m=Math.ceil(o.length/9),h=c=>{c===l||c<1||c>m||n(c)};return e.jsxs("div",{className:"bg-stone-50 min-h-screen ",children:[e.jsx(z,{}),e.jsx("div",{className:"mt-16 bg-[#f4f3ef] px-[7%] animate-fadeIn",children:e.jsx(X,{title:"Collection"})}),a?e.jsx("div",{className:"text-center mt-16 ",children:e.jsx("div",{className:"flex items-center justify-center w-full mt-[25%]",children:e.jsx("div",{className:"",children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})})}):e.jsxs("div",{className:"mt-16 flex flex-col items-center mb-16 animate-fadeIn",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-16 sm:w-1/2 md:w-4/5 md:gap-8 lg:w-11/12 w-full",children:g.map(c=>e.jsx(ms,{id:c.id,title:c.title,price:c.price,imageUrl:c.imageUrl},c.id))}),le(l,m,h)]}),e.jsx($,{})]})};function us(){const{id:s}=Ct(),t=I(),r=T(),{items:a,loading:l}=w(b=>b.products),n=w(b=>b.favourites.items),o=w(b=>b.cart.items),{userDetails:d}=w(b=>b.auth),[i,p]=x.useState(null);x.useEffect(()=>{t(_())},[t]),x.useEffect(()=>{if(a.length>0){const b=a.find(y=>y.id===s);p(b)}},[a,s]);const g=n.includes(s),m=o.some(b=>b.id===s),h=()=>{if(i&&i.quantity>0){const b={...i,stockquantity:i.quantity};t(we(b))}},c=()=>{d?(t(V(s)),console.log("Toggled favorite for product ID:",s)):r("/login")};return l?e.jsx("div",{className:"flex items-center justify-center object-centerw-full mt-[25%]",children:e.jsx("div",{className:"",children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})}):i?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-10 px-[7%] py-5 md:py-[3%] md:px-[7%]",children:[e.jsx("div",{className:"bg-slate-400 col-span-2 sm:col-span-1",children:e.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-auto"})}),e.jsxs("div",{className:"col-span-2 sm:col-span-1 px-3 sticky top-5 left-[50%]",children:[e.jsx("h2",{className:"text-titleColor text-[1.2rem] md:text-[1.5rem] font-light mb-2 md:mb-5 ",children:i.title}),e.jsxs("p",{className:"text-mainColor mb-2 md:mb-5",children:[i.price,"EGP"]}),e.jsx("p",{className:"text-textColor text-[0.8rem] mb-2 md:mb-5",children:i.description||"White Zen wood"}),e.jsxs("p",{className:"text-textColor text-[0.8rem] mb-2 md:mb-5",children:["Quantity : ",i.quantity]}),e.jsxs("p",{className:"text-textColor text-[0.8rem] mb-5 md:mb-[3rem]",children:[e.jsx("span",{className:"font-bold text-[0.8rem]",children:"Size:"})," 65 x 46"]}),e.jsxs("div",{className:"flex gap-2 mb-5 md:mb-[5rem]",children:[e.jsx("button",{className:`text-[12px] md:text-[14px] p-[0.6rem] px-7 border border-mainColor hover:text-[#fff] hover:bg-mainColor ${i.quantity===0?"cursor-not-allowed opacity-50":""}`,onClick:h,disabled:i.quantity===0||m,children:m?"Added to Cart":"ADD TO CART"}),e.jsx("button",{className:"text-[12px] md:text-[14px] p-[0.6rem] px-3 border border-mainColor hover:text-[#fff] hover:bg-mainColor flex items-center justify-center",onClick:c,children:g?e.jsx(Ye,{size:22,color:"red"}):e.jsx(Ne,{size:22,color:"black"})})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-titleColor text-[0.8rem]",children:["Category : ",i.category||"New Arrival"]})})]})]})}):e.jsx("div",{children:"Product not found"})}function hs(){return e.jsx("div",{children:e.jsx("div",{className:"bg-[#B1A080]  py-4 mt-[5%] text-[#fff] text-[0.7rem]",children:e.jsx("p",{className:"ps-[7%]",children:e.jsx("span",{children:" Home / Shop / Product Details "})})})})}function ps(){return e.jsxs("div",{children:[e.jsx(hs,{}),e.jsx(z,{}),e.jsx(us,{}),e.jsxs("div",{className:"px-[7%] py-5 md:py-[3%] md:px-[7%]",children:[e.jsx("h2",{className:"text-titleColor text-[1.3rem] md:text-[1.6rem] mb-2 md:mb-5 font-semibold",children:"Related Products"}),e.jsx(st,{})]}),e.jsx($,{})]})}const fs=({priceRange:s,onPriceChange:t,onSearch:r,onCategoryChange:a})=>{const l=d=>{const i=Number(d.target.value);t(i,s.max)},n=d=>{const i=Number(d.target.value);t(s.min,i)},o=d=>{a(d)};return e.jsxs("div",{className:"w-full lg:w-1/4 p-4 bg-transparent",children:[e.jsx("div",{className:"mb-6 relative",children:e.jsx("input",{type:"text",placeholder:"Search Product...",onChange:d=>r(d.target.value),className:"w-full p-2 border-b-2 border-gray-400 focus:outline-none focus:border-gray-600 bg-transparent"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-700 font-Montserrat",children:"CATEGORIES"}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"livingRoom",className:"form-checkbox h-4 w-4 text-gray-600 bg-white border-gray-300 focus:ring-gray-500",onChange:()=>o("Living Room")}),e.jsx("label",{htmlFor:"livingRoom",className:"ml-2 text-gray-700",children:"Living Room"})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"bedRoom",className:"form-checkbox h-4 w-4 text-gray-600 bg-white border-gray-300 focus:ring-gray-500",onChange:()=>o("Bed Room")}),e.jsx("label",{htmlFor:"bedRoom",className:"ml-2 text-gray-700",children:"Bed Room"})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"decoration",className:"form-checkbox h-4 w-4 text-gray-600 bg-white border-gray-300 focus:ring-gray-500",onChange:()=>o("Decoration")}),e.jsx("label",{htmlFor:"decoration",className:"ml-2 text-gray-700",children:"Decoration"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-700",children:"PRICE"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"number",value:s.min,min:0,max:s.max,onChange:l,className:"w-1/2 p-2 border-b-2 border-gray-400 focus:outline-none focus:border-gray-600"}),e.jsx("input",{type:"number",value:s.max,min:0,onChange:n,className:"w-1/2 p-2 border-b-2 border-gray-400 focus:outline-none focus:border-gray-600"})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[e.jsxs("span",{children:[s.min," EGP"]}),e.jsxs("span",{children:[s.max," EGP"]})]})]})]})},gs=({onSortChange:s})=>{const[t,r]=x.useState(!1),[a,l]=x.useState("Sort by Default"),n=o=>{l(o),s(o),r(!1)};return e.jsxs("div",{className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs("button",{type:"button",onClick:()=>r(!t),className:"inline-flex justify-between w-full rounded-md  px-4 py-2  text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none",children:[a,e.jsx(Ot,{className:"ml-2"})]})}),t&&e.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-30",children:e.jsxs("div",{className:"py-1",children:[e.jsx("a",{onClick:()=>n("Sort by Default"),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer",children:"Sort by Default"}),e.jsx("a",{onClick:()=>n("Sort by Price: ↑"),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer",children:"Sort by Price: ↑"}),e.jsx("a",{onClick:()=>n("Sort by Price: ↓"),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer",children:"Sort by Price: ↓"})]})})]})},js="/assets/Decoration-DS9BDyWJ.jpg",bs=({title:s})=>e.jsxs("div",{className:"relative bg-cover bg-center h-72",style:{backgroundImage:`url(${js})`},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-white",children:[e.jsx("h1",{className:"text-5xl font-bold",children:s}),e.jsxs("p",{className:"mt-2 text-sm",children:["Home / ",s]})]})]}),Ce=6,ys=()=>{const[s,t]=x.useState([]),[r,a]=x.useState([]),[l,n]=x.useState(1),[o,d]=x.useState(0),[i,p]=x.useState(!1),[g,m]=x.useState(""),[h,c]=x.useState({min:"",max:""}),[b,y]=x.useState("Sort by Default"),[u,E]=x.useState([]);x.useEffect(()=>{N()},[]),x.useEffect(()=>{j()},[s,g,h,b,u]);const N=async()=>{p(!0);const f=be(R(S,"products"),yt("id","desc")),B=(await G(f)).docs.map(Fe=>({id:Fe.id,...Fe.data()}));t(B),p(!1)},j=()=>{let f=s;u.length>0&&(f=f.filter(U=>u.includes(U.category))),h.min!=""&&(f=f.filter(U=>U.price>=h.min)),h.max!=""&&(f=f.filter(U=>U.price<=h.max)),g&&(f=f.filter(U=>U.title.toLowerCase().includes(g.toLowerCase()))),b==="Sort by Price: ↑"?f=f.sort((U,B)=>U.price-B.price):b==="Sort by Price: ↓"?f=f.sort((U,B)=>B.price-U.price):f=f.sort((U,B)=>B.id-U.id),a(f),d(Math.ceil(f.length/Ce)),n(1)},P=f=>{f===l||f<1||f>o||n(f)},L=(f,U)=>{c({min:f,max:U})},D=f=>{m(f)},q=f=>{y(f)},M=f=>{const U=u.includes(f)?u.filter(B=>B!==f):[...u,f];E(U)},C=l*Ce,Y=C-Ce,J=r.slice(Y,C);return e.jsxs("div",{className:"bg-stone-50 min-h-screen mt-16",children:[e.jsx(z,{}),e.jsx(bs,{title:"Shop"}),e.jsxs("div",{className:"flex flex-col lg:flex-row px-4 md:px-16 lg:px-18 py-8 ",children:[e.jsxs("div",{className:"flex flex-col flex-grow items-center w-full ",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 w-[86%]",children:[e.jsxs("p",{className:"text-gray-600 text-sm",children:["Showing ",J.length," of ",r.length," ","products"]}),e.jsx(gs,{onSortChange:q})]}),i?e.jsx("div",{className:"flex items-center justify-center object-center w-full mt-[25%]",children:e.jsx("div",{className:"",children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})}):J.length===0?e.jsx("div",{className:"text-center mt-16 text-5xl text-gray-400",children:"No Products Found"}):e.jsx("div",{className:"flex flex-wrap justify-center sm:w-1/2 md:w-4/5 md:gap-8 w-full lg:w-full animate-fadeIn",children:J.map(f=>e.jsx(et,{id:f.id,title:f.title,price:f.price,imageUrl:f.imageUrl,stockquantity:f.quantity},f.id))})]}),e.jsx(fs,{priceRange:h,onPriceChange:L,onSearch:D,onCategoryChange:M})]}),e.jsx("div",{className:"mt-16 mb-16",children:J.length===0?"":le(l,o,P)}),e.jsx($,{})]})},rt=({postsPerPage:s,totalPosts:t,paginate:r,currentPage:a})=>{const l=[];for(let n=1;n<=Math.ceil(t/s);n++)l.push(n);return e.jsx("nav",{className:"flex justify-center mt-4",children:e.jsx("ul",{className:"inline-flex",children:l.map(n=>e.jsx("li",{className:`mx-1  ${a===n?" text-mainColor":"bg-transparent"} px-3 py-1 rounded my-5`,children:e.jsx("button",{onClick:()=>r(n),children:n})},n))})})},Ns=()=>{const s=w(u=>u.cart.items),t=w(u=>u.cart.totalPrice),r=w(u=>u.cart.totalQuantity),{userDetails:a}=w(u=>u.auth),l=I(),n=T(),o=s.length===0,[d,i]=x.useState(1),p=5,g=d*p,m=g-p,h=s.slice(m,g),c=u=>i(u),b=(u,E,N)=>{E>0&&l(Qt({id:u,quantity:E,stockquantity:N}))},y=()=>{n(a?"/checkout":"/login")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 mt-16",children:[e.jsx(z,{}),e.jsx(X,{title:"Cart"}),e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:e.jsxs("div",{className:"flex flex-col mt-8 lg:flex-row lg:space-x-8",children:[e.jsxs("div",{className:"md:max-w-4xl w-full",children:[e.jsx("div",{className:"bg-white rounded shadow-md overflow-hidden",children:o?e.jsx("p",{className:"text-center py-4",children:"Your cart is empty."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex flex-col space-y-4 p-4",children:h.map(u=>e.jsxs("div",{className:"flex items-center space-x-4 bg-white border-b last:border-0 hover:bg-gray-50 transition p-4 rounded",children:[e.jsx("div",{className:"w-16",children:e.jsx("img",{src:u.imageUrl,alt:u.title,className:"w-full object-cover rounded"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("span",{className:"font-medium text-gray-700",children:u.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Quantity: ",u.quantity]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Subtotal: ",u.price*u.quantity," EGP"]})]}),e.jsx("button",{onClick:()=>l(Re(u)),className:"text-gray-600 hover:text-red-500 transition",children:"✕"})]},u.id))}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("table",{className:"min-w-full bg-white border-collapse text-sm md:text-base",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 py-4 text-gray-600"}),e.jsx("th",{className:"w-22 py-4 text-gray-600"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-left",children:"Product"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-center w-28",children:"Price"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-center w-28",children:"Quantity"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-center w-28",children:"Subtotal"})]})}),e.jsx("tbody",{children:h.map(u=>e.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50 transition",children:[e.jsx("td",{className:"text-center py-4",children:e.jsx("button",{onClick:()=>l(Re(u)),className:"text-gray-600 hover:text-red-500 transition",children:"✕"})}),e.jsx("td",{className:"py-4 h-10 w-20 object-cover",children:e.jsx("img",{src:u.imageUrl,alt:u.title,className:"w-16 object-cover rounded"})}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:"font-medium text-gray-700",children:u.title})}),e.jsxs("td",{className:"text-center text-gray-600",children:[u.price," EGP"]}),e.jsx("td",{className:"text-center w-28",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("button",{onClick:()=>b(u.id,u.quantity+1,u.stockquantity),className:"w-6 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300",children:"+"}),e.jsx("span",{className:"w-8 text-center",children:u.quantity}),e.jsx("button",{onClick:()=>b(u.id,u.quantity-1,u.stockquantity),disabled:u.quantity===1,className:`w-6 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300 ${u.quantity===1?"cursor-not-allowed opacity-50":""}`,children:"-"})]})}),e.jsxs("td",{className:"text-center w-28 text-gray-600",children:[u.price*u.quantity," EGP"]})]},u.id))})]})})]})}),e.jsx(rt,{postsPerPage:p,totalPosts:s.length,paginate:c,currentPage:d})]}),e.jsxs("div",{className:"lg:max-w-sm w-full h-fit bg-white shadow-md rounded p-4 mt-8 lg:mt-0 text-sm md:text-base",children:[e.jsx("h2",{className:"text-lg font-semibold pb-4",children:"Cart totals"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between border-b pb-2",children:[e.jsx("p",{className:"text-gray-600",children:"Total Items"}),e.jsx("p",{className:"font-semibold",children:r})]}),e.jsxs("div",{className:"flex justify-between border-b pb-2 mt-2",children:[e.jsx("p",{className:"text-gray-600",children:"Total Price"}),e.jsxs("p",{className:"font-semibold",children:[t," EGP"]})]})]}),e.jsx("button",{onClick:y,disabled:o,className:`mt-4 py-4 rounded text-center block w-full transition ${o?"bg-gray-500 cursor-not-allowed":"bg-gray-800 hover:bg-[#B48E61] text-white"}`,children:"Proceed to Checkout"})]})]})}),e.jsx($,{})]})},vs={orders:[],selectedOrder:null,status:"idle",error:null},he=O("orders/placeOrder",async({cart:s,userId:t,paymentMethod:r},{rejectWithValue:a})=>{try{const l=R(S,"orders"),n=Nt.now(),o="TUgeq6U27JsTojE1XukC";let d=[],i=0;for(const m of s){const h=A(S,"products",m.id),c=await je(h);if(c.exists()){const y=c.data().quantity;if(y>=m.quantity){const u=y-m.quantity;await re(h,{quantity:u}),d.push({productId:m.id,quantity:m.quantity,price:m.price}),i+=m.quantity*m.price}else throw new Error(`Insufficient quantity for product ${m.id}`)}else throw new Error(`Product ${m.id} not found`)}const p=await Ge(l,{userId:t,orderDate:n,orderDetails:d,paymentMethod:r,orderStatusId:o,totalAmount:i}),g=p.id;return await re(p,{orderId:g}),{orderId:g,userId:t,orderDate:n,orderDetails:d,paymentMethod:r,orderStatusId:o,totalAmount:i}}catch(l){return a(l.message)}}),pe=O("orders/fetchOrders",async(s,{rejectWithValue:t})=>{var r;try{const a=(r=H.currentUser)==null?void 0:r.uid;if(!a)throw new Error("User not authenticated");const l=R(S,"orders"),n=be(l,Ie("userId","==",a));return(await G(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(a){return t(a.message)}}),at=K({name:"orders",initialState:vs,reducers:{selectOrder:(s,t)=>{s.selectedOrder=s.orders.find(r=>r.orderId===t.payload)}},extraReducers:s=>{s.addCase(he.pending,t=>{t.status="loading"}).addCase(he.fulfilled,(t,r)=>{t.status="succeeded",t.orders.push(r.payload)}).addCase(he.rejected,(t,r)=>{t.status="failed",t.error=r.payload}).addCase(pe.pending,t=>{t.status="loading"}).addCase(pe.fulfilled,(t,r)=>{t.status="succeeded",t.orders=r.payload}).addCase(pe.rejected,(t,r)=>{t.status="failed",t.error=r.payload})}}),{selectOrder:ws}=at.actions,Cs=at.reducer,Ps=Ft("pk_test_51PxDvCKnFPkQIH7k7MXlMhruE5k4kx6OJ6mzENb3MpOr69stp6gmJCefwwQArWQK28cLhDSlElLjelspO5r4v7Hx00w9diAawY"),Ss=({totalPrice:s,onPaymentSuccess:t})=>{const r=Mt(),a=Rt(),[l,n]=x.useState(null),[o,d]=x.useState(!1),p=w(m=>m.cart.items).length===0,g=async m=>{if(m.preventDefault(),d(!0),!r||!a){n("Stripe.js has not loaded yet."),d(!1);return}const{error:h,paymentMethod:c}=await r.createPaymentMethod({type:"card",card:a.getElement(Me)});h?(n(h.message),d(!1)):t(c.id)};return e.jsxs("form",{onSubmit:g,children:[e.jsx("div",{className:"mt-6",children:e.jsx(Me,{})}),l&&e.jsx("div",{className:"text-red-500 mt-2",children:l}),e.jsx("button",{type:"submit",disabled:p||!r||o,className:`mt-6 w-full py-5 rounded transition text-white ${p||!r||o?"bg-gray-500 cursor-not-allowed":"bg-gray-800 hover:bg-[#B48E61]"}`,children:o?"Processing...":`Pay ${s.toFixed(2)} EGP`})]})},ks=()=>{const s=T(),t=I(),r=w(m=>m.cart.items),a=r.length===0,l=w(m=>m.cart.totalPrice),{userDetails:n}=w(m=>m.auth),[o,d]=x.useState({firstName:"",lastName:"",phone:"",email:"",paymentMethod:"pickup"});x.useEffect(()=>{n||s("/")},[n,s]);const i=m=>{d(h=>({...h,paymentMethod:m.target.value}))},p=()=>{if(!n){alert("Please log in to place an order.");return}const m={cart:r,userId:n.userId,paymentMethod:o.paymentMethod};t(he(m)).unwrap().then(()=>{t(Ve()),localStorage.removeItem("cart"),d({firstName:"",lastName:"",phone:"",email:"",paymentMethod:"pickup"}),sessionStorage.setItem("showTemporaryPage","true"),s("/success")}).catch(h=>{console.error("Failed to place order: ",h)})},g=m=>{p()};return e.jsxs("div",{className:"min-h-screen mt-16",children:[e.jsx(z,{}),e.jsx(X,{title:"Checkout"}),e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:e.jsxs("div",{className:"flex flex-col mt-8 lg:flex-row lg:space-x-8",children:[e.jsx("div",{className:"lg:max-w-4xl w-full",children:e.jsxs("div",{className:"rounded p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Billing details"}),e.jsxs("form",{className:"space-y-6 border-t-2",children:[n?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"username",value:n.userName||"Update your data",className:"mt-2 block w-full border border-gray-300 rounded-md py-3 px-3 text-gray-900 focus:outline-none",readOnly:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"city",value:n.city||"Update your data",className:"mt-2 block w-full border border-gray-300 rounded-md py-3 px-3 text-gray-900 focus:outline-none",readOnly:!0})]})]}):e.jsx("div",{className:"text-red-500 text-lg",children:"You need to be logged in to view or update your details."}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone",value:n.phone||"Update your data",className:"mt-2 block w-full border border-gray-300 rounded-md py-3 px-3 text-gray-900 focus:outline-none",readOnly:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900",children:["User email address"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:n.userEmail||"Update your data",className:"mt-2 block w-full border border-gray-300 rounded-md py-3 px-3 text-gray-900 focus:outline-none",readOnly:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"address",value:n.address||"Update your data",className:"mt-2 block w-full border border-gray-300 rounded-md py-3 px-3 text-gray-900 focus:outline-none",readOnly:!0})]})]})]})]})}),e.jsxs("div",{className:"lg:max-w-md w-full bg-white shadow-md rounded p-6 mt-8 lg:mt-0 text-sm md:text-base h-fit",children:[e.jsx("h2",{className:"text-2xl font-semibold pb-6 border-b-2",children:"Your order"}),e.jsxs("ul",{className:"mb-4 mt-6",children:[e.jsxs("li",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Product"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Subtotal"})]}),r.length>0?r.map(m=>e.jsxs("li",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"text-gray-700",children:[m.title," × ",m.quantity]}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[(m.price*m.quantity).toFixed(2)," EGP"]})]},m.id)):e.jsx("li",{className:"text-gray-700",children:"No items in cart."})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Subtotal"}),e.jsxs("span",{children:[l.toFixed(2)," EGP"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-900 font-semibold mt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[l.toFixed(2)," EGP"]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"pickup",checked:o.paymentMethod==="pickup",onChange:i,className:"form-radio text-black"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Cash on pickup"})]}),e.jsx("br",{}),e.jsxs("label",{className:"inline-flex items-center mt-3",children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"visa",checked:o.paymentMethod==="visa",onChange:i,className:"form-radio text-black"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Pay with stripe"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Your personal data will be used to process your order, support your experience throughout this website, and for other purposes described in our privacy policy."}),o.paymentMethod==="visa"?e.jsx(Lt,{stripe:Ps,children:e.jsx(Ss,{totalPrice:l,onPaymentSuccess:g})}):e.jsx("button",{onClick:()=>p(),disabled:a,className:`mt-6 w-full py-5 rounded transition text-white ${a?"bg-gray-500 cursor-not-allowed":"bg-gray-800 hover:bg-[#B48E61]"}`,children:"PLACE ORDER"})]})]})}),e.jsx($,{})]})};function Es({isSidebarOpen:s}){const[t,r]=x.useState("productsdash"),a=I(),l=T(),n=async()=>{await a(qe()),l("/login")};return e.jsxs("div",{className:`h-full p-5 relative flex flex-col justify-between ${s?"w-[250px]":"w-[80px]"} transition-all duration-300 bg-white shadow-lg`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-center mb-16",children:e.jsx("h2",{className:`text-3xl text-mainColor font-semibold ${!s&&"hidden"}`,children:"BELLA"})}),e.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[e.jsxs(Q,{to:"/dashboard/productsDash",className:`text-mainColor font-montserrat transition-colors flex items-center w-full ${t==="productsdash"?"bg-mainColor text-white":"hover:bg-mainColor hover:text-white"} p-2 rounded-md`,onClick:()=>r("productsdash"),children:[e.jsx(_e,{size:24}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Products"})]}),e.jsxs(Q,{to:"/dashboard/users",className:`text-mainColor font-montserrat transition-colors flex items-center w-full ${t==="users"?"bg-mainColor text-white":"hover:bg-mainColor hover:text-white"} p-2 rounded-md`,onClick:()=>r("users"),children:[e.jsx(Oe,{size:24}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Users"})]}),e.jsxs(Q,{to:"/dashboard/orders",className:`text-mainColor font-montserrat transition-colors flex items-center w-full ${t==="orders"?"bg-mainColor text-white":"hover:bg-mainColor hover:text-white"} p-2 rounded-md`,onClick:()=>r("orders"),children:[e.jsx(We,{size:24}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Orders"})]})]})]}),e.jsx("div",{className:"flex items-center text-gray-700 hover:text-red-600 cursor-pointer",children:e.jsx(v,{onClick:n,className:"ml-3 text-titleColor",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Dt,{size:24}),e.jsx("span",{className:`${!s&&"hidden"}`,children:"Logout"})]})})})]})}function Is(){const[s,t]=x.useState(!1),r=()=>{t(!s)};return e.jsxs("div",{className:"h-full flex",children:[e.jsx("button",{onClick:r,className:"fixed z-50 top-4 left-4 p-2 text-mainColor hover:text-hovermain focus:outline-none transition-all",children:e.jsx(Je,{size:28})}),e.jsx("div",{className:`fixed top-0 left-0 h-full z-40 transition-all duration-300 ${s?"translate-x-0 w-[250px]":"translate-x-0 w-[80px]"}`,children:e.jsx(Es,{isSidebarOpen:s})}),e.jsx("div",{className:`flex-grow p-4 transition-all duration-300 ${s?"ml-[250px]":"ml-[80px]"}`,children:e.jsx(He,{})})]})}function Us(){return e.jsxs("div",{children:[e.jsxs("section",{className:"h-screen flex  flex-col items-strat justify-center bg-cover bg-center ",style:{backgroundImage:`url(${Ae})`},children:[e.jsxs("div",{className:"text-center flex flex-col justify-evenly",children:[e.jsx("h2",{className:"text-[15rem] md:text-[15rem]  lg:text-[16rem] font-sans ",style:{color:"rgba(255, 255, 255, 0.8)"},children:"404"}),e.jsx("h3",{className:"text-[1.3rem] md:text-[2rem] lg:test-[7rem] font-bold ",style:{color:"rgba(255, 255, 255, 0.7)",letterSpacing:"0.6rem"},children:"P A G E N O T F O U N D"})]}),e.jsx("div",{className:"flex justify-center items-center mt-4",children:e.jsx("button",{className:`text-[14px] md:text-[15px]  lg:text-[16px] p-3 sm:w-[28%] md:w-[22%]   lg:w-[20%] xl:w-[13%]\r
           border border-white text-white`,style:{color:"rgba(255, 255, 255, 0.8)",letterSpacing:"0.1rem"},children:e.jsx(v,{to:"/",children:"GO TO HOME"})})})]}),e.jsx($,{})]})}const Os=()=>e.jsxs("div",{className:"bg-white min-h-screen mt-16",children:[e.jsx(z,{}),e.jsx(X,{title:"Contact Us",bg_image:"../../../public/ciri-hm-bg.jpg"}),e.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-12 mt-10 flex flex-col lg:flex-row gap-12",children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("p",{className:"text-3xl text-gray-700",children:["If you have any questions or concerns about this privacy policy or our practices, please contact us at ",e.jsx("br",{})," info@Bella.store"]}),e.jsxs("form",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Full name",className:"mt-1 block w-full px-3 py-2 border-b border-gray-300 focus:outline-none focus:ring-0  sm:text-sm bg-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Phone number",className:"mt-1 block w-full px-3 py-2 border-b border-gray-300 focus:outline-none sm:text-sm bg-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"userEmail",placeholder:"userEmail Address",className:"mt-1 block w-full px-3 py-2 border-b border-gray-300 focus:outline-none sm:text-sm bg-transparent"})}),e.jsx("div",{children:e.jsx("textarea",{placeholder:"Leave a message",className:"mt-1 block w-full px-3 py-2 border-b border-gray-300 focus:outline-none sm:text-sm bg-transparent",rows:"4"})}),e.jsx("button",{type:"submit",className:"inline-flex justify-center py-3 px-6 border border-gray-300 shadow-sm text-sm font-medium  text-black bg-transparent hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Send a message"})]})]}),e.jsx("div",{className:"flex-1 mt-8 lg:mt-0 sm:ml-0 lg:ml-8",children:e.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3455.424120810197!2d31.429572075342982!3d29.99597597494805!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjnCsDU5JzQ1LjUiTiAzMcKwMjUnNTUuNyJF!5e0!3m2!1sen!2seg!4v1726742788334!5m2!1sen!2seg",width:"100%",height:"450",style:{border:0},allowFullScreen:"",loading:"lazy",className:"rounded-md shadow-md",referrerPolicy:"no-referrer-when-downgrade",title:"Google Map"})})]}),e.jsx($,{})]}),Ds=()=>{const s=w(c=>c.favourites.items),t=w(c=>c.products.items),r=I(),{userDetails:a}=w(c=>c.auth),[l,n]=x.useState(1),o=5;if(!a)return e.jsxs("div",{className:"flex flex-col min-h-screen ",children:[e.jsx(z,{}),e.jsxs("div",{className:"flex-grow mt-16 mb-3",children:[e.jsx(X,{title:"Wish List"}),e.jsx("div",{className:"bg-white m-auto mt-10 max-w-4xl rounded shadow-md overflow-hidden mb-5",children:e.jsx("p",{className:"text-center py-10 text-gray-500",children:"Please log in to view your wishlist."})})]}),e.jsx($,{})]});const d=t.filter(c=>s.includes(c.id)),i=l*o,p=i-o,g=d.slice(p,i),m=c=>n(c),h=c=>{const b={...c,stockquantity:c.quantity};r(we(b))};return e.jsxs("div",{className:"flex flex-col min-h-screen ",children:[e.jsx(z,{}),e.jsxs("div",{className:"flex-grow mt-16 mb-3",children:[e.jsx(X,{title:"Wish List"}),e.jsx("div",{className:"bg-white m-auto mt-10 max-w-4xl rounded shadow-md overflow-hidden mb-5",children:d.length===0?e.jsx("p",{className:"text-center py-10 text-gray-500",children:"Your wishlist is empty."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex flex-col space-y-4 p-4",children:g.map(c=>e.jsxs("div",{className:"flex items-center space-x-4 bg-white border-b last:border-0 hover:bg-gray-50 transition p-4 rounded",children:[e.jsx("div",{className:"w-24",children:e.jsx("img",{src:c.imageUrl,alt:c.title,className:"w-full object-cover rounded"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("span",{className:"font-medium text-gray-700",children:c.title}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Price: ",c.price," EGP"]}),e.jsx("div",{className:`text-sm mt-1 ${c.quantity===0?"text-red-500":"text-green-500"}`,children:c.quantity===0?"Out of stock":"In stock"}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:()=>h(c),disabled:c.quantity===0,className:`py-2 px-4 rounded shadow ${c.quantity===0?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:(c.quantity===0,"Add to cart")})})]}),e.jsx("button",{onClick:()=>r(V(c.id)),className:"text-gray-600 hover:text-red-500 transition",children:"✕"})]},c.id))}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("table",{className:"min-w-full bg-white border-collapse text-sm md:text-base",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 py-4 text-gray-600"}),e.jsx("th",{className:"w-18 py-4 text-gray-600"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-left",children:"Product"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-center",children:"Price"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-center",children:"Stock Status"}),e.jsx("th",{className:"py-4 text-gray-600 font-semibold text-center"})]})}),e.jsx("tbody",{children:g.map(c=>e.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50 transition",children:[e.jsx("td",{className:"text-center py-4",children:e.jsx("button",{onClick:()=>r(V(c.id)),className:"text-gray-600 hover:text-red-500 transition",children:"✕"})}),e.jsx("td",{className:"py-4",children:e.jsx("img",{src:c.imageUrl,alt:c.title,className:"w-16 object-cover rounded"})}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:"font-medium text-gray-700",children:c.title})}),e.jsxs("td",{className:"text-center text-gray-600",children:[c.price," EGP"]}),e.jsx("td",{className:`text-center ${c.quantity===0?"text-red-500":"text-green-500"}`,children:c.quantity===0?"Out of stock":"In stock"}),e.jsx("td",{className:"text-center",children:e.jsx("button",{onClick:()=>h(c),disabled:c.quantity===0,className:`py-2 px-4 rounded shadow ${c.quantity===0?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-[#B48E61]"}`,children:c.quantity===0?"Add to Cart":"Add to cart"})})]},c.id))})]})})]})}),e.jsx(rt,{postsPerPage:o,totalPosts:d.length,paginate:m,currentPage:l})]}),e.jsx($,{})]})};function qs(){const s=I(),{user:t,userDetails:r,loading:a}=w(c=>c.auth),l=T(),n=Ue(),[o,d]=x.useState(!0),[i,p]=x.useState(n.pathname),g=x.useRef(null);x.useEffect(()=>{const c=ye(H,b=>{b?s(W(b.uid)):l("/login")});return()=>c()},[s,l]),x.useEffect(()=>{n.pathname==="/profileUser"&&l("/profileUser/userInfo")},[n,l]);const m=()=>{d(!o)},h=c=>{p(c),l(c)};return a?e.jsx("div",{className:"flex items-center justify-center w-full mt-[25%]",children:e.jsx("div",{children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})}):r?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-screen",children:[e.jsxs("div",{ref:g,className:`h-full p-4 relative flex flex-col justify-between ${o?"w-[250px]":"w-[80px]"} transition-all duration-300 bg-white shadow-lg`,children:[e.jsxs("div",{className:"flex flex-col m",children:[e.jsx("button",{onClick:m,className:"text-mainColor text-3xl mb-10",children:e.jsx(Je,{})}),e.jsxs("div",{className:"flex flex-col gap-4 mt-6 w-full",children:[e.jsxs(Q,{to:"/profileUser/userInfo",className:`text-mainColor font-montserrat transition-colors flex items-center w-full ${i==="/profileUser/userInfo"?"bg-mainColor text-white":"hover:bg-mainColor hover:text-white"} p-2 rounded-md`,onClick:()=>h("/profileUser/userInfo"),children:[e.jsx(Oe,{size:24}),e.jsx("span",{className:`ml-2 ${!o&&"hidden"}`,children:"User Info"})]}),e.jsxs(Q,{to:"/profileUser/userfav",className:`text-mainColor font-montserrat transition-colors flex items-center w-full ${i==="/profileUser/userfav"?"bg-mainColor text-white":"hover:bg-mainColor hover:text-white"} p-2 rounded-md`,onClick:()=>h("/profileUser/userfav"),children:[e.jsx(Ne,{size:24}),e.jsx("span",{className:`ml-2 ${!o&&"hidden"}`,children:"Favourites"})]}),e.jsxs(Q,{to:"/profileUser/orders",className:`text-mainColor font-montserrat transition-colors flex items-center w-full ${i==="/profileUser/orders"?"bg-mainColor text-white":"hover:bg-mainColor hover:text-white"} p-2 rounded-md`,onClick:()=>h("/profileUser/orders"),children:[e.jsx(We,{size:24}),e.jsx("span",{className:`ml-2 ${!o&&"hidden"}`,children:"My Orders"})]})]})]}),e.jsx("div",{className:"flex items-center text-gray-700 hover:text-red-600 cursor-pointer",children:e.jsx(Q,{to:"/",className:"ml-3  text-titleColor",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(qt,{className:"text-hovermain",size:24}),e.jsxs("span",{className:`${!o&&"hidden"}`,children:[" ","Back Home"," "]})]})})})]}),e.jsx("div",{className:"w-full p-5",children:e.jsx(He,{})})]})}):e.jsx("div",{className:"flex items-center justify-center w-full mt-[25%]",children:e.jsx("div",{children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})})}function As(){const{userDetails:s}=w(d=>d.auth),t=I(),{register:r,handleSubmit:a,formState:{errors:l},setValue:n}=ae();x.useEffect(()=>{const d=ye(H,i=>{i?(n("userName",i.displayName||(s==null?void 0:s.userName)||""),n("userEmail",i.email||(s==null?void 0:s.userEmail)||""),n("phone",(s==null?void 0:s.phone)||""),n("address",(s==null?void 0:s.address)||""),n("city",(s==null?void 0:s.city)||"")):console.log("No user is authenticated")});return()=>d()},[n,s]);const o=d=>{if(!d.userName||!d.userEmail){console.log("Please fill in all required fields.");return}t(se(d)).unwrap().then(()=>{console.log("User updated successfully")}).catch(i=>{console.error("Error updating user:",i)})};return e.jsx("form",{onSubmit:a(o),className:"row-span-10 flex max-w-3xl mx-auto p-6 md:p-3",children:e.jsxs("div",{className:"flex flex-wrap justify-center items-center",children:[e.jsx("div",{className:"avatar flex justify-start items-center w-full mb-8",children:e.jsxs("div",{className:"flex-col content-center justify-center px-3",children:[e.jsx("h2",{className:"text-titleColor text-[1.2rem] font-semibold",children:s==null?void 0:s.userName}),e.jsx("p",{className:"test-textColor text-[12px]",children:s==null?void 0:s.userEmail})]})}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",placeholder:"Name",...r("userName",{required:"Name is required"}),className:"input input-bordered w-full focus:bg-white"}),l.userName&&e.jsx("p",{className:"text-red-500",children:l.userName.message})]}),e.jsx("input",{type:"email",placeholder:"Email Address",...r("userEmail",{required:"Email is required",pattern:{value:/^[^@ ]+@[^@ ]+\.[^@ .]{2,}$/,message:"Email is not valid"}}),className:"input input-bordered w-full max-w-4xl focus:bg-white"}),l.userEmail&&e.jsx("p",{className:"text-red-500",children:l.userEmail.message}),e.jsx("input",{type:"text",placeholder:"Phone Number",...r("phone",{required:"Phone number is required",pattern:{value:/^[0-9]+$/,message:"Phone number is not valid"}}),className:"input input-bordered w-full max-w-4xl focus:bg-white"}),l.phone&&e.jsx("p",{className:"text-red-500",children:l.phone.message}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center gap-4 w-full mb-4",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",placeholder:"Address",...r("address",{required:"Address is required"}),className:"input input-bordered w-full focus:bg-white"}),l.address&&e.jsx("p",{className:"text-red-500",children:l.address.message})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",placeholder:"City",...r("city",{required:"City is required"}),className:"input input-bordered w-full focus:bg-white"}),l.city&&e.jsx("p",{className:"text-red-500",children:l.city.message})]})]})]}),e.jsx("button",{className:`bg-hovermain text-white max-w-4xl mt-20 text-[1rem] px-9 py-3 rounded-lg border shadow-sm\r
              border-hovermain hover:bg-white hover:text-hovermain`,type:"submit",children:"Save Changes"})]})]})})}const Pe=({children:s,isAllowed:t,redirectPath:r="/"})=>t?s:e.jsx(ne,{to:r,replace:!0}),Fs=()=>e.jsx("div",{}),Ls=()=>{const s=I(),{users:t,loading:r,error:a}=w(C=>C.auth),[l,n]=x.useState(!1),[o,d]=x.useState(null),[i,p]=x.useState(1),g=10,[m,h]=x.useState(""),[c,b]=x.useState(!1);x.useEffect(()=>{s(ke())},[s]);const y=C=>{h(C.target.value.toLowerCase()),p(1)},u=t.filter(C=>C.userName.toLowerCase().includes(m)),E=i*g,N=E-g,j=u.slice(N,E),P=Math.ceil(u.length/g),L=C=>{C===i||C<1||C>P||p(C)},D=C=>{d(C),n(!0)},q=()=>{n(!1),b(!1)},M=async()=>{if(o){b(!0);try{await s(Ee(o.id)).unwrap(),F.success("User deleted successfully!",{position:"bottom-right"}),q()}catch{F.error("Error deleting user, please try again.",{position:"bottom-right"}),b(!1)}}};return r?e.jsx("div",{className:"flex items-center justify-center object-centerw-full mt-[25%]",children:e.jsx("div",{className:"",children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})}):a?e.jsx("p",{children:a}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex my-5",children:[e.jsxs("h1",{className:"text-2xl font-bold text-titleColor",children:[" ",e.jsx("div",{className:"breadcrumbs text-sm text-titleColor",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(v,{to:"/dashboard",children:"Dashboard"})}),e.jsx("li",{children:e.jsx("a",{children:"Users"})})]})})]}),e.jsx("input",{type:"text",className:"w-[50%] input input-bordered focus:border-0 h-[2.5rem] m-auto",placeholder:"Search",onChange:y,value:m})]}),e.jsxs("div",{className:"container mx-auto p-4 mt-3 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"Index"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No users found"})}):j.map((C,Y)=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{children:Y+1+(i-1)*g}),e.jsx("td",{children:C.userName}),e.jsx("td",{children:C.userEmail}),e.jsx("td",{children:C.role}),e.jsx("td",{className:"flex justify-center gap-2",children:e.jsx("button",{className:"btn btn-ghost btn-xs text-red-700",onClick:()=>D(C),children:"Delete"})})]},C.id))})]})}),le(i,P,L)]}),l&&e.jsx("div",{className:"fixed w-full z-[99999] inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"modal-box bg-white p-5 rounded-lg sm:w-[50rem]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Delete User"}),e.jsx("button",{className:"btn btn-circle btn-ghost hover:bg-mainColor hover:text-white",onClick:q,children:e.jsx(ve,{size:18})})]}),e.jsxs("p",{className:"py-4",children:["Are you sure you want to delete"," ",o==null?void 0:o.userName,"?"]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn bg-white text-red-800 hover:bg-white hover:border-mainColor",onClick:M,disabled:c,children:"Delete"}),e.jsx("button",{className:"btn bg-mainColor text-white hover:bg-mainColor",onClick:q,children:"Cancel"})]})]})})]})},Ms=({closeModal:s,productToUpdate:t})=>{const[r,a]=x.useState(null),[l,n]=x.useState(null),[o,d]=x.useState(!1),{register:i,handleSubmit:p,setValue:g,watch:m,formState:{errors:h}}=ae({defaultValues:{title:t?t.title:"",category:t?t.category:"",description:t?t.description:"",price:t?t.price:0,quantity:t?t.quantity:0}}),c=I();m("imageUrl"),x.useEffect(()=>{t?(a(t.imageUrl),g("title",t.title),g("category",t.category),g("description",t.description),g("price",t.price),g("quantity",t.quantity),g("imageUrl",t.imageUrl)):u()},[t,g]);const b=N=>{const j=N.target.files[0];j&&(n(j),a(URL.createObjectURL(j)),g("imageUrl",j.name))},y=async()=>{if(!l)return null;const N=Be(zt,`/product_images/${l.name}`),j=vt(N,l);return new Promise((P,L)=>{j.on("state_changed",null,D=>L(D),async()=>{try{const D=await Qe(j.snapshot.ref);P(D)}catch(D){L(D)}})})},u=()=>{a(null),n(null),g("title",""),g("category",""),g("description",""),g("price",0),g("quantity",0),g("imageUrl","")},E=async N=>{d(!0);try{const j=l?await y():N.imageUrl,P={...N,imageUrl:j};t?(await c(xe({productId:t.id,updatedData:P})),F.success("Product updated successfully!",{position:"bottom-right"})):(await c(me(P)),F.success("Product added successfully!",{position:"bottom-right"})),u(),s()}catch{F.error("Error saving product, please try again",{position:"bottom-right"})}finally{d(!1)}};return e.jsx("div",{className:"fixed w-full z-[99999] inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"modal-box bg-white p-5 rounded-lg sm:w-[50rem]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:t?"Update Product":"Add Product"}),e.jsx("button",{className:"btn btn-circle btn-ghost hover:bg-mainColor hover:text-white ",onClick:s,"aria-label":"Close Modal",children:e.jsx(ve,{size:18})})]}),e.jsxs("form",{onSubmit:p(E),className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-3",children:"Product Name"}),e.jsx("input",{type:"text",id:"title",...i("title",{required:"Product Name is required"}),className:"input input-bordered w-full focus:border-0",placeholder:"Product Name"}),h.title&&e.jsx("p",{className:"text-red-700 text-sm mt-1",children:h.title.message})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"w-[50%]",children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-3",children:"Price"}),e.jsx("input",{type:"number",id:"price",...i("price",{required:"Price is required",min:{value:1,message:"Price must be at least 1"}}),className:"input input-bordered w-full focus:border-0 mb-3",placeholder:"Price"}),h.price&&e.jsx("p",{className:"text-red-700 text-sm mt-1",children:h.price.message})]}),e.jsxs("div",{className:"w-[50%]",children:[e.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-3",children:"Quantity"}),e.jsx("input",{type:"number",id:"quantity",...i("quantity",{required:"Quantity is required",min:{value:1,message:"Quantity must be at least 1"}}),className:"input input-bordered w-full focus:border-0",placeholder:"Quantity"}),h.quantity&&e.jsx("p",{className:"text-red-700 text-sm mt-1",children:h.quantity.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-3",children:"Category"}),e.jsxs("select",{id:"category",...i("category",{required:"Category is required"}),className:"select select-bordered w-full focus:border-0",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category"}),e.jsx("option",{value:"Bed Room",children:"Bed Room"}),e.jsx("option",{value:"Decoration",children:"Decoration"}),e.jsx("option",{value:"Living Room",children:"Living Room"})]}),h.category&&e.jsx("p",{className:"text-red-700 text-sm mt-1",children:h.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-3",children:"Product Description"}),e.jsx("textarea",{id:"description",...i("description",{required:"Description is required"}),className:"textarea textarea-bordered w-full focus:border-0",placeholder:"Product Description",rows:"2"}),h.description&&e.jsx("p",{className:"text-red-700 text-sm mt-1",children:h.description.message})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{htmlFor:"imgFile",className:"cursor-pointer flex items-center gap-2 mb-3 text-sm font-medium",children:[e.jsx(At,{size:22}),"Add Image"]}),e.jsx("input",{id:"imgFile",type:"file",accept:"image/*",className:"hidden",onChange:b})]}),r&&e.jsx("img",{src:r,alt:"Preview",className:"object-cover h-[20rem]"}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{disabled:o,className:`bg-mainColor text-white p-2 px-7 rounded ${o?"opacity-50 cursor-not-allowed":""}`,type:"submit",children:o?"Processing...":t?"Update Product":"Add Product"})})]})]})})},Rs=({productToDelete:s,closeModal:t,handleDelete:r,isDisabled:a})=>e.jsx("dialog",{open:!0,className:"modal modal-bottom sm:modal-middle h-[100%] w-[100%]",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsxs("div",{className:"modal-box shadow",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Delete Product"}),e.jsxs("p",{className:"py-4",children:["Are you sure you want to delete ",s==null?void 0:s.title,"?"]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn bg-white text-red-800 hover:bg-white hover:border-mainColor",onClick:r,disabled:a,children:"Delete"}),e.jsx("button",{className:"btn bg-mainColor text-white hover:bg-mainColor",onClick:t,children:"Cancel"})]})]})}),$s=()=>{const[s,t]=x.useState(!1),[r,a]=x.useState(!1),[l,n]=x.useState(null),[o,d]=x.useState(1),i=5,[p,g]=x.useState(""),[m,h]=x.useState(!1),[c,b]=x.useState(null),{items:y}=w(f=>f.products),u=I();x.useEffect(()=>{u(_())},[u]);const E=f=>{b(f),t(!0)},N=f=>{n(f),a(!0),h(!1)},j=()=>{a(!1)},P=async()=>{h(!0);try{await u(ue(l.id)),F.success("Product deleted successfully!",{position:"bottom-right"}),j()}catch{F.error("Error deleting product, please try again.",{position:"bottom-right"})}finally{h(!1)}},L=f=>{g(f.target.value.toLowerCase()),d(1)},D=y.filter(f=>f.title.toLowerCase().includes(p)||f.category.toLowerCase().includes(p)),q=Math.ceil(D.length/i),M=o*i,C=M-i,Y=D.slice(C,M),J=f=>{f===o||f<1||f>q||d(f)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between my-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-titleColor",children:e.jsx("div",{className:"breadcrumbs text-sm",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(v,{to:"/dashboard",children:"Dashboard"})}),e.jsx("li",{children:e.jsx("span",{children:"Products"})})]})})}),e.jsx("input",{type:"text",className:"w-[50%] input input-bordered focus:border-0 h-[2.5rem]",placeholder:"Search",onChange:L}),e.jsx("button",{onClick:()=>t(!0),className:"bg-mainColor text-white lg:p-2 lg:px-7 rounded p-2 ",children:e.jsx("span",{className:"text-[0.8rem]",children:"Add Product"})})]}),e.jsxs("div",{className:"container mx-auto p-4 mt-3 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"Index"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:Y.map((f,U)=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{children:U+1+(o-1)*i}),e.jsx("td",{children:e.jsx("img",{src:f.imageUrl,alt:f.title,className:"min-w-24 min-h-24 max-h-32 max-w-32 object-cover"})}),e.jsx("td",{children:f.title}),e.jsx("td",{children:f.category}),e.jsx("td",{children:f.quantity}),e.jsxs("td",{children:["$",f.price]}),e.jsx("td",{children:f.description}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>E(f),children:"Edit"}),e.jsx("button",{className:"btn btn-ghost btn-xs text-red-600",onClick:()=>N(f),children:"Delete"})]})]},f.id))})]})}),le(o,q,J)]}),s&&e.jsx(Ms,{closeModal:()=>{t(!1),b(null)},productToUpdate:c}),r&&e.jsx(Rs,{productToDelete:l,closeModal:j,handleDelete:P,isDisabled:m})]})},zs={orders:[],status:"idle",error:null},fe=O("adminOrders/fetchAllOrders",async(s,{rejectWithValue:t})=>{try{const r=R(S,"orders"),a=R(S,"users"),l=R(S,"products"),n=await G(r),o=await G(a),d=await G(l),i=o.docs.reduce((m,h)=>(m[h.id]=h.data(),m),{}),p=d.docs.reduce((m,h)=>(m[h.id]=h.data(),m),{});return n.docs.map(m=>{var c;const h=m.data();return{id:m.id,...h,userName:((c=i[h.userId])==null?void 0:c.userName)||"Unknown User",orderDetails:h.orderDetails.map(b=>{var y,u,E;return{...b,imageUrl:((y=p[b.productId])==null?void 0:y.imageUrl)||"",price:((u=p[b.productId])==null?void 0:u.price)||0,title:((E=p[b.productId])==null?void 0:E.title)||`Product ${b.productId}`}})}})}catch(r){return t(r.message)}}),lt=O("adminOrders/updateOrderStatus",async({orderId:s,newStatus:t},{rejectWithValue:r})=>{try{const a=A(S,"orders",s);return await re(a,{orderStatusId:t}),{orderId:s,newStatus:t}}catch(a){return r(a.message)}}),Ts=K({name:"adminOrders",initialState:zs,reducers:{},extraReducers:s=>{s.addCase(fe.pending,t=>{t.status="loading"}).addCase(fe.fulfilled,(t,r)=>{t.status="succeeded",t.orders=r.payload}).addCase(fe.rejected,(t,r)=>{t.status="failed",t.error=r.payload}).addCase(lt.fulfilled,(t,r)=>{const{orderId:a,newStatus:l}=r.payload,n=t.orders.find(o=>o.id===a);n&&(n.orderStatusId=l)})}}),Bs=Ts.reducer,Qs=()=>{const s=I(),{orders:t,status:r,error:a}=w(j=>j.adminOrders),[l,n]=x.useState(1),o=5,[d,i]=x.useState(null),[p,g]=x.useState(!1);x.useEffect(()=>{s(fe())},[s]);const m=(j,P)=>{s(lt({orderId:j,newStatus:P}))},h=l*o,c=h-o,b=t.slice(c,h),y=Math.ceil(t.length/o),u=j=>{j===l||j<1||j>y||n(j)},E=j=>{i(j),g(!0)},N=()=>{g(!1),i(null)};return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"All Users Orders"}),r==="loading"&&e.jsx("div",{className:"flex items-center justify-center w-full mt-[25%]",children:e.jsx("div",{children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor"})})}),r==="failed"&&e.jsx("p",{children:a}),r==="succeeded"&&e.jsxs("div",{className:"container mx-auto p-4 mt-3 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"Index"}),e.jsx("th",{children:"Order ID"}),e.jsx("th",{children:"User"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Total Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Details"})]})}),e.jsx("tbody",{children:b.map((j,P)=>{const L=(l-1)*o+P+1;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:L}),e.jsx("td",{className:"text-center",children:j.id}),e.jsx("td",{className:"text-center",children:j.userName}),e.jsx("td",{className:"text-center",children:new Date(j.orderDate.toDate()).toLocaleDateString()}),e.jsxs("td",{className:"text-center",children:["USD"," ",j.orderDetails.reduce((D,q)=>D+q.quantity*q.price,0).toFixed(2)]}),e.jsx("td",{className:"text-center",children:e.jsxs("select",{value:j.orderStatusId,onChange:D=>m(j.id,D.target.value),className:"border rounded-lg p-2 cursor-pointer text-base",children:[e.jsx("option",{value:"w3oNSy1Y2MrIX1coDIP0",children:"Completed"}),e.jsx("option",{value:"TUgeq6U27JsTojE1XukC",children:"In Progress"}),e.jsx("option",{value:"If1uJ5Dbm66w2V0b4CuU",children:"Cancelled"})]})}),e.jsx("td",{className:"text-center",children:e.jsx("button",{onClick:()=>E(j),className:"text-mainColor hover:text-amber-800 cursor-pointer",children:"View Details"})})]},j.id)})})]})}),le(l,y,u)]}),p&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"modal-box bg-white p-6 rounded-lg shadow-lg w-full max-w-3xl relative",children:[e.jsx("button",{onClick:N,className:"absolute top-3 right-3 text-gray-600  cursor-pointer btn btn-circle btn-ghost hover:bg-mainColor hover:text-white",children:e.jsx(ve,{size:24})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Order Details"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table w-full text-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"Image"}),e.jsx("th",{className:"text-center",children:"Name"}),e.jsx("th",{className:"text-center",children:"Price"}),e.jsx("th",{className:"text-center",children:"Quantity"}),e.jsx("th",{className:"text-center",children:"Total"})]})}),e.jsx("tbody",{children:d.orderDetails.map((j,P)=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{children:e.jsx("img",{src:j.imageUrl||"https://via.placeholder.com/64",alt:j.title,className:"w-16 h-16 object-cover rounded-md"})}),e.jsx("td",{children:j.title}),e.jsxs("td",{children:["USD ",j.price.toFixed(2)]}),e.jsx("td",{children:j.quantity}),e.jsxs("td",{children:["USD"," ",(j.price*j.quantity).toFixed(2)]})]},P))})]})})]})})]})};function Gs(){const{userDetails:s}=w(d=>d.auth),t=I(),{register:r,handleSubmit:a,formState:{errors:l},setValue:n}=ae();x.useEffect(()=>{const d=ye(H,i=>{i?(n("userName",i.displayName||(s==null?void 0:s.userName)||""),n("userEmail",i.email||(s==null?void 0:s.userEmail)||""),n("phone",(s==null?void 0:s.phone)||""),n("address",(s==null?void 0:s.address)||""),n("city",(s==null?void 0:s.city)||"")):console.log("No user is authenticated")});return()=>d()},[n,s]);const o=d=>{if(!d.userName||!d.userEmail){console.log("Please fill in all required fields.");return}t(se(d)).unwrap().then(()=>{console.log("User updated successfully")}).catch(i=>{console.error("Error updating user:",i)})};return e.jsx("form",{onSubmit:a(o),className:"row-span-10 flex max-w-3xl mx-auto p-6 md:p-3",children:e.jsxs("div",{className:"flex flex-wrap justify-center items-center",children:[e.jsx("div",{className:"avatar flex justify-start items-center w-full mb-8",children:e.jsxs("div",{className:"flex-col content-center justify-center px-3",children:[e.jsx("h2",{className:"text-titleColor text-[1.2rem] font-semibold",children:s==null?void 0:s.userName}),e.jsxs("p",{className:"test-textColor text-[12px]",children:[s==null?void 0:s.address,", ",s==null?void 0:s.city]})]})}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",placeholder:"Name",...r("userName",{required:"Name is required"}),className:"input input-bordered w-full focus:bg-white"}),l.userName&&e.jsx("p",{className:"text-red-500",children:l.userName.message})]}),e.jsx("input",{type:"email",placeholder:"Email Address",...r("userEmail",{required:"Email is required",pattern:{value:/^[^@ ]+@[^@ ]+\.[^@ .]{2,}$/,message:"Email is not valid"}}),className:"input input-bordered w-full max-w-4xl focus:bg-white"}),l.userEmail&&e.jsx("p",{className:"text-red-500",children:l.userEmail.message}),e.jsx("input",{type:"text",placeholder:"Phone Number",...r("phone",{required:"Phone number is required",pattern:{value:/^[0-9]+$/,message:"Phone number is not valid"}}),className:"input input-bordered w-full max-w-4xl focus:bg-white"}),l.phone&&e.jsx("p",{className:"text-red-500",children:l.phone.message}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center gap-4 w-full mb-4",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",placeholder:"Address",...r("address",{required:"Address is required"}),className:"input input-bordered w-full focus:bg-white"}),l.address&&e.jsx("p",{className:"text-red-500",children:l.address.message})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",placeholder:"City",...r("city",{required:"City is required"}),className:"input input-bordered w-full focus:bg-white"}),l.city&&e.jsx("p",{className:"text-red-500",children:l.city.message})]})]})]}),e.jsx("button",{className:`bg-hovermain text-white max-w-4xl mt-20 text-[1rem] px-9 py-3 rounded-lg border shadow-sm\r
              border-hovermain hover:bg-white hover:text-hovermain`,type:"submit",children:"Save Changes"})]})]})})}const Hs=({item:s,handleAddToCart:t,handleToggleFavourite:r})=>e.jsxs("div",{className:"bg-white shadow-md rounded-md overflow-hidden p-4",children:[e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-48 object-cover"}),e.jsx("h3",{className:"font-semibold mt-2",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Price: ",s.price," EGP"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"In stock"}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>t(s),className:"bg-btncolor text-white py-2 px-4 rounded hover:bg-gray-600",children:"Add to cart"}),e.jsx("button",{onClick:()=>r(s.id),className:"text-red-500 hover:text-red-700 transition",children:"✕ Remove"})]})]});function _s(){const s=I(),t=w(o=>o.favourites.items),a=w(o=>o.products.items).filter(o=>t.includes(o.id)),l=o=>{s(we(o))},n=o=>{s(V(o))};return e.jsxs("div",{className:"p-5",children:[e.jsx("h2",{className:"text-titleColor text-[1.2rem] font-semibold",children:"Your Favourites"}),a.length===0?e.jsx("p",{children:"Your favourites list is empty."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(o=>e.jsx(Hs,{item:o,handleAddToCart:l,handleToggleFavourite:n},o.id))})]})}const Ys=()=>{const s=T(),t=()=>{sessionStorage.removeItem("showTemporaryPage"),s("/")};return x.useEffect(()=>{sessionStorage.getItem("showTemporaryPage")!=="true"&&s("/")},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center",style:{backgroundImage:`url(${Ae})`},children:e.jsxs("div",{className:"text-center p-4 sm:p-6 md:p-8 shadow-md rounded w-11/12 sm:w-10/12 md:max-w-lg",style:{backgroundColor:"rgba(255, 255, 255, 0.3)"},children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-semibold mb-4",children:"Order Placed Successfully!"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-700 mb-6",children:"Thank you for your purchase."}),e.jsx("button",{onClick:t,className:"px-4 sm:px-6 py-2 sm:py-3 bg-gray-800 text-white font-semibold rounded-lg shadow-md hover:bg-[#B48E61] transition duration-300",children:"Go to Home"})]})})},Ws=({closeModal:s,quantity:t,orderDetailsUser:r})=>e.jsx("dialog",{open:!0,className:"modal modal-bottom sm:modal-middle h-[100%] w-[100%]",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsxs("div",{className:"modal-box shadow-lg bg-white rounded-lg p-6 w-[90%] h-[80%]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Product Details"}),e.jsx("button",{className:"btn btn-circle btn-ghost hover:bg-mainColor hover:text-white",onClick:s,"aria-label":"Close Modal",children:e.jsx(ve,{size:18})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"Index"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Price"})]})}),e.jsx("tbody",{children:r.map((a,l)=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{children:l+1}),e.jsx("td",{children:e.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-24 h-24 object-cover"})}),e.jsx("td",{children:a.title}),e.jsx("td",{children:t}),e.jsxs("td",{children:["$",a.price]})]},a.id))})]})})]})}),Js=()=>{const s=I(),{orders:t,selectedOrder:r,status:a,error:l}=w(y=>y.orders),{items:n}=w(y=>y.products),[o,d]=x.useState(null),[i,p]=x.useState(!1),[g,m]=x.useState([]);x.useEffect(()=>{s(pe()),s(_())},[s]);const h=y=>{s(ws(y)),d(y);const u=t.find(E=>E.orderId===y);if(u){const E=u.orderDetails.map(N=>{const j=c(N.productId);return{...N,title:j.title||`Product ${N.productId}`,imageUrl:j.imageUrl||"https://via.placeholder.com/64",price:j.price||N.price}});m(E),p(!0)}},c=y=>n.find(u=>u.id===y)||{},b=()=>{p(!1)};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between my-5",children:e.jsx("h1",{className:"text-2xl font-bold text-titleColor",children:"Orders"})}),a==="loading"&&e.jsx("p",{children:"Loading..."}),a==="failed"&&e.jsxs("p",{children:["Error: ",l]}),e.jsxs("div",{className:"container mx-auto p-4 mt-3 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"Index"}),e.jsx("th",{children:"Order Date"}),e.jsx("th",{children:"Payment Method"}),e.jsx("th",{children:"Order Details"})]})}),e.jsx("tbody",{children:t.length>0?t.map((y,u)=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{children:u+1}),e.jsx("td",{children:new Date(y.orderDate.toDate()).toLocaleDateString()}),e.jsx("td",{children:y.paymentMethod}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-ghost btn-xs text-red-600",onClick:()=>h(y.orderId),children:"Details"})})]},y.orderId)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No orders found."})})})]})}),i&&e.jsx(Ws,{closeModal:b,orderDetailsUser:g,quantity:g.reduce((y,u)=>y+u.quantity,0)})]})]})},Zs=()=>{const{pathname:s}=Ue();return x.useEffect(()=>{window.scrollTo(0,0)},[s]),null};function Vs(){const[s,t]=x.useState(null),[r,a]=x.useState(!0),{role:l}=w(o=>o.auth),n=I();return x.useEffect(()=>{const o=ye(H,async d=>{d?(t(d),await n(W(d.uid))):t(null),a(!1)});return()=>o()},[n]),r?e.jsx("div",{className:"flex items-center justify-center object-center w-full mt-[20%] ",children:e.jsx("div",{className:"",children:e.jsx("span",{className:"loading loading-infinity loading-lg text-mainColor size-16"})})}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{}),e.jsxs(Le,{children:[e.jsxs(k,{path:"/dashboard/*",element:e.jsx(Pe,{isAllowed:l==="admin",redirectPath:"/",children:e.jsx(Is,{})}),children:[e.jsx(k,{path:"",element:e.jsx(ne,{to:"productsDash"})}),e.jsx(k,{path:"statistics",element:e.jsx(Fs,{})}),e.jsx(k,{path:"users",element:e.jsx(Ls,{})}),e.jsx(k,{path:"productsdash",element:e.jsx($s,{})}),e.jsx(k,{path:"orders",element:e.jsx(Qs,{})})]}),e.jsx(k,{path:"*",element:l==="admin"?e.jsx(ne,{to:"/dashboard/productsDash"}):e.jsxs(Le,{children:[e.jsx(k,{path:"/",element:e.jsx(ns,{})}),e.jsx(k,{path:"/login",element:e.jsx(Pe,{isAllowed:!l,redirectPath:l==="admin"?"/dashboard":"/",children:e.jsx(Yt,{})})}),e.jsx(k,{path:"/Register",element:e.jsx(Pe,{isAllowed:!l,redirectPath:l==="admin"?"/dashboard":"/",children:e.jsx(os,{})})}),e.jsx(k,{path:"/AboutUs",element:e.jsx(ds,{})}),e.jsx(k,{path:"/Products",element:e.jsx(xs,{})}),e.jsx(k,{path:"/shop",element:e.jsx(ys,{})}),e.jsx(k,{path:"/products/:id",element:e.jsx(ps,{})}),e.jsx(k,{path:"/contactUs",element:e.jsx(Os,{})}),e.jsx(k,{path:"/wishlist",element:e.jsx(Ds,{})}),e.jsx(k,{path:"/cart",element:e.jsx(Ns,{})}),e.jsx(k,{path:"/checkout",element:e.jsx(ks,{})}),e.jsxs(k,{path:"/profileUser/*",element:s?e.jsx(qs,{}):e.jsx(ne,{to:"/"}),children:[e.jsx(k,{path:"userInfo",element:e.jsx(As,{})}),e.jsx(k,{path:"settings",element:e.jsx(Gs,{})}),e.jsx(k,{path:"userfav",element:e.jsx(_s,{})}),e.jsx(k,{path:"orders",element:e.jsx(Js,{})})]}),e.jsx(k,{path:"*",element:e.jsx(Us,{})}),e.jsx(k,{path:"/success",element:e.jsx(Ys,{})})]})})]}),e.jsx(wt,{})]})}const Xs=dt({reducer:{adminOrders:Bs,products:ss,auth:_t,cart:Gt,favourites:ts,orders:Cs},middleware:s=>s({serializableCheck:!1}).concat(Bt)});ot.createRoot(document.getElementById("root")).render(e.jsx(nt.StrictMode,{children:e.jsx(it,{children:e.jsx(ct,{store:Xs,children:e.jsx(Vs,{})})})}));
